<!DOCTYPE html>
<html lang="zh-Hans">
<head>
<title>TypeScript | 如何利用 Template Type 来做 Parser | Eczn's Home</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no,minimal-ui">
<meta name="format-detection" content="telephone=no">

<style id="CSS_VARS"></style>
<script>
(function() {
console.log('INIT CSS VAR');
function loadCSSVars() {
    const j = localStorage.getItem("CSS_VARS_2" /* STORAGE_KEY.CSS_VARS */);
    const initialVars = initialCSSVars();
    if (!j)
        return initialVars;
    try {
        const result = {
            ...initialVars,
            ...JSON.parse(j)
        };
        console.log('loadCSSVars from storage', result);
        return result;
    }
    catch (error) {
        console.error('load css vars with error', error);
        return initialVars;
    }
}
function renderCSSVars(vars, style) {
    const allDefine = Object.keys(vars).map(k => {
        const v = vars[k];
        const cssValue = typeof v === 'number' ? `${v}px` : v;
        return `--${k}:${cssValue};`;
    }).join('\n');
    if (style) {
        style.innerHTML = `:root { ${allDefine} }`;
    }
    else {
        console.error(`style#CSS_VARS NotFound !`);
    }
}
function initialCSSVars() {
    let rem = 16;
    // 移动端
    if (typeof window !== 'undefined' && window.innerWidth <= 500) {
        rem = Number(((window.innerWidth - 20) / 42).toFixed(1));
        console.log('mobile calculated rem =>', rem);
    }
    return {
        rem,
        enableSmallerFont: false,
        displayToc: 'block',
        fontSmcp: 'source serif pro, serif',
        fontCode: 'consolas, Menlo, monospace',
        fontTitle: 'Noto Serif SC, serif',
        fontArticle: 'source serif pro, LXGW WenKai',
        fontSansSerif: 'sans-serif',
    };
}
window.__initialCSSVars = loadCSSVars();
renderCSSVars(__initialCSSVars, document.querySelector('#CSS_VARS'));
})();
</script>

<link rel="icon" href="/favicon.png"><script defer="defer" src="/js/index.a1ff11e6.js"></script><script defer="defer" src="/js/chunk-lib.c90ce4c7.js"></script><link href="/css/index.b0e70e3c588e68d62835.css" rel="stylesheet"><link href="/css/chunk-lib.5c7d4887bb8714b00c54.css" rel="stylesheet"></head>
<body x-apple-data-detectors="none">
<noscript>当前浏览器不支持 JavaScript, 建议使用支持 JavaScript 的浏览器来访问此网站 !</noscript>
<div id="rally-bg" style="opacity:0"></div>
<div id="app"><div class="ball-canvas-container"></div><nav class="nav-main --fontSmcp"><div class="_title default-max-width">Eczn&#x27;s Home</div><div class="smcphr"></div><div class="_links default-max-width"><a class="r-link _link clickable r-link" href="/">Home</a><a class="r-link _link clickable r-link" href="/tl/0/">Timeline</a><a class="r-link _link clickable r-link" href="/cate/all/">Category</a><a class="r-link _link clickable r-link" href="/setting/">Setting</a><a class="r-link _link clickable r-link" href="/launchpad/">Launchpad</a></div></nav><div class="std-box category-main category-detail default-max-width"><div class="std-box-content "><div class="_cate-header"><div class="_blog-links"><a class="r-link _blog-link --fontTitle _active" href="/cate/TypeScript/6807abf36fcb16f0fd8272b415d91c0c/"><span class="_nth">#<!-- -->0</span>如何利用 Template Type 来做 Parser</a></div><div class="_cate-title --fontTitle">分类「 <!-- -->TypeScript<!-- --> 」</div></div><div><div id="start" class="blog-header-main"><div class="_infos"><div class="_info"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="clock" class="svg-inline--fa fa-clock fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"></path></svg>2020-10-01</div><div class="_info"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tag" class="svg-inline--fa fa-tag fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"></path></svg>TypeScript</div><div class="_info"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tag" class="svg-inline--fa fa-tag fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"></path></svg>TemplateType</div><div class="_info"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tag" class="svg-inline--fa fa-tag fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"></path></svg>Parser</div></div><div class="_title --fontTitle">如何利用 Template Type 来做 Parser</div></div><article><div class="r-article"><div class="std-para --fontArticle" data-minimap-color="#CCCCCC">最近 Hejlsberg 提交了一个 PR 让 TS 支持了 Template Type:<br/>
https://github.com/microsoft/TypeScript/pull/40336</div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">这个特性目前还没正式发 npm 包，但可以在: <a target="_blank" href="https://www.typescriptlang.org/play?ts=4.1.0-pr-40336-88" style="background-color:#e2e0f3" class="std-link --fontSansSerif  _line" data-minimap-color="#e2e0f3"><span class="std-link-icon r-link" data-src="/get-favicon/www.typescriptlang.org?h=8384882231" style="background-image:url(&quot;/get-favicon/www.typescriptlang.org?h=8384882231&quot;)"></span><span class="std-link-txt">TypeScript Playground</span></a> 上体验到。</div>
<hr class="std-hr"/>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">合着这个新特性在 TS 里就可以愉快的将形如 <div class="std-inline-code" data-minimap-color="#f5e9e9">${XX}</div> 当成一种新的类型来做类型抽象了, 简单玩玩：</div>
<div class="std-code"><pre class="prismjs ts rally-runner  "><span style="user-select:none" class="line-numbers-rows">00</span><span class="token keyword">type</span> <span class="token class-name">HexNumber0x123</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">0x</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token number">123</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">01</span>
<span style="user-select:none" class="line-numbers-rows">02</span><span class="token keyword">type</span> <span class="token class-name">DOMEvent<span class="token operator">&lt;</span>Name <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>
<span style="user-select:none" class="line-numbers-rows">03</span>  <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">on</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span style="user-select:none" class="line-numbers-rows">04</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">05</span>
<span style="user-select:none" class="line-numbers-rows">06</span><span class="token comment">// =&gt; &#x27;onClick&#x27;</span>
<span style="user-select:none" class="line-numbers-rows">07</span><span class="token keyword">type</span> <span class="token class-name">ClickEvt</span> <span class="token operator">=</span> DOMEvent<span class="token operator">&lt;</span><span class="token string">&#x27;Click&#x27;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">08</span>
<span style="user-select:none" class="line-numbers-rows">09</span><span class="token comment">// 0 ~ F</span>
<span style="user-select:none" class="line-numbers-rows">10</span><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">FROM_0_TO_F</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>
<span style="user-select:none" class="line-numbers-rows">11</span>    <span class="token string">&#x27;0&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;1&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;2&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;3&#x27;</span> <span class="token operator">|</span>
<span style="user-select:none" class="line-numbers-rows">12</span>    <span class="token string">&#x27;4&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;5&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;6&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;7&#x27;</span> <span class="token operator">|</span>
<span style="user-select:none" class="line-numbers-rows">13</span>    <span class="token string">&#x27;8&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;9&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;A&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;B&#x27;</span> <span class="token operator">|</span>
<span style="user-select:none" class="line-numbers-rows">14</span>    <span class="token string">&#x27;C&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;D&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;E&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;F&#x27;</span>
<span style="user-select:none" class="line-numbers-rows">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">16</span>
<span style="user-select:none" class="line-numbers-rows">17</span><span class="token keyword">type</span> <span class="token class-name">Hex</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">FROM_0_TO_F</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">FROM_0_TO_F</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">18</span>
<span style="user-select:none" class="line-numbers-rows">19</span><span class="token comment">// 形如 0xAABBCC</span>
<span style="user-select:none" class="line-numbers-rows">20</span><span class="token keyword">type</span> <span class="token class-name">CharHex</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">0x</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Hex<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">21</span>
<span style="user-select:none" class="line-numbers-rows">22</span><span class="token keyword">const</span> Char_A<span class="token operator">:</span> CharHex <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">0x41</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">23</span><span class="token keyword">const</span> Char_A_Err<span class="token operator">:</span> CharHex <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">0xGG</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span> <span class="token comment">// type error</span></pre></div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">Template Type 配合条件类型就可以来做一些匹配字符串的判断，如果再加上条件类型的递归即可实现一些文法处理器了，比方说有大神已经写出了加法计算器了，还有些人写出了 URL Parser，总之… 本文主要探讨这些 Parser 的写作手法。</div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">在本文进一步之前，我们先从几个常用 type 来进一步熟悉 template type 这个特性</div>
<h1 id="numberic-template-union-type" class="std-title --fontTitle"><a target="_blank" href="#numberic-template-union-type" class="markdownIt-Anchor">#</a> Numberic :: Template + Union Type<i data-minimap="Ignore"> ↵ </i></h1>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">temaplte 结合 union 可以用来做判断数字的逻辑</div>
<div class="std-code"><pre class="prismjs ts rally-runner  "><span style="user-select:none" class="line-numbers-rows">00</span><span class="token comment">// 长度为 1 的字符串数字</span>
<span style="user-select:none" class="line-numbers-rows">01</span><span class="token keyword">type</span> <span class="token class-name">Numberic</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
<span style="user-select:none" class="line-numbers-rows">02</span>    <span class="token string">&#x27;0&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;1&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;2&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;3&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;4&#x27;</span> <span class="token operator">|</span>
<span style="user-select:none" class="line-numbers-rows">03</span>    <span class="token string">&#x27;5&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;6&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;7&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;8&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;9&#x27;</span>
<span style="user-select:none" class="line-numbers-rows">04</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">上述 Numberic 可以用来限制一位长度的字符串，但不能限制 n 位长度的字符串类型，如果要实现 n 位的判读，需要引入递归操作：</div>
<div class="std-code"><pre class="prismjs ts rally-runner  "><span style="user-select:none" class="line-numbers-rows">00</span><span class="token comment">// 判断某字符串是不是数字</span>
<span style="user-select:none" class="line-numbers-rows">01</span><span class="token keyword">type</span> <span class="token class-name">IsAllNumberic<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>
<span style="user-select:none" class="line-numbers-rows">02</span>    <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Numberic<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Rest<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span style="user-select:none" class="line-numbers-rows">03</span>        <span class="token comment">// S 满足上面的 template type 的时候</span>
<span style="user-select:none" class="line-numbers-rows">04</span>        <span class="token comment">// 如果 Rest 是 &#x27;&#x27; 则返回 true 否则递归返回 IsAllNumberic&lt;Rest&gt;</span>
<span style="user-select:none" class="line-numbers-rows">05</span>        <span class="token operator">?</span> Rest <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> IsAllNumberic<span class="token operator">&lt;</span>Rest<span class="token operator">&gt;</span>
<span style="user-select:none" class="line-numbers-rows">06</span>        <span class="token comment">// 不满足返回 false</span>
<span style="user-select:none" class="line-numbers-rows">07</span>        <span class="token operator">:</span> <span class="token boolean">false</span>
<span style="user-select:none" class="line-numbers-rows">08</span><span class="token punctuation">)</span>
<span style="user-select:none" class="line-numbers-rows">09</span>
<span style="user-select:none" class="line-numbers-rows">10</span><span class="token keyword">type</span> <span class="token class-name">testOneNumberic_1</span> <span class="token operator">=</span> IsAllNumberic<span class="token operator">&lt;</span><span class="token string">&#x27;aaaa&#x27;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span style="user-select:none" class="line-numbers-rows">11</span><span class="token keyword">type</span> <span class="token class-name">testOneNumberic_2</span> <span class="token operator">=</span> IsAllNumberic<span class="token operator">&lt;</span><span class="token string">&#x27;12345&#x27;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// true</span></pre></div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">上述代码建议在 <a target="_blank" href="https://www.typescriptlang.org/play?ts=4.1.0-pr-40336-88#code/PTAEn9UwyvULjlQRlIELdDq2oMm9BMcoB1NkFgBQALgJ4AOApqAHICuAtgEZkBOAlgMagC8oAFPqANAByAAxDQAH2FxxUoQCZZwgMxKhAFln9BQgKxqAbGoDsagBxqAnEPwBKANz58IUIBIlQLWmgBfM06QPRmgWDlfbHxiclAASQBnAEEAG1iaBmZ2AB4AZVAyAA8CMgA7ABNI0EiCVjyAcwA+Ll5tAQzs3MLigAMAEgBvRMZWNgBfLpY8gDNmUAAlMlL+1vrBARcMwEO7QGbYwCg5QCN0xFBc2hJYgENc3dIKREA300BMBXmFl0AgzUAc80npglBfYXFATCVAFfjAPbVdkxqBRAGQqX0ASAmAJX1-hEYvEesk2CkpqUqrdBAB+F6lTI5fJFUCtVqgLFlYGgABcsLiCTovVSKIIaLwCzuYH8axhI0OsUiZHRAip3N5-LwtichDOu1eAHk8mQEX0APoIbhRGmK1JCQ46w5CKr2UAuYV8kJS3KlOUKumIpXyWrq+E2vopIRweTKdT6A1GsBk0X4IA" style="background-color:#ece7f9" class="std-link --fontSansSerif  _line" data-minimap-color="#ece7f9"><span class="std-link-icon r-link" data-src="/get-favicon/www.typescriptlang.org?h=-17851195504" style="background-image:url(&quot;/get-favicon/www.typescriptlang.org?h=-17851195504&quot;)"></span><span class="std-link-txt">Eczn’s TypeScript Playground :: Type Parser For Numberic String</span></a> 中查看</div>
<h1 id="headof-类型-template-infer" class="std-title --fontTitle"><a target="_blank" href="#headof-类型-template-infer" class="markdownIt-Anchor">#</a> HeadOf 类型 :: Template infer<i data-minimap="Ignore"> ↵ </i></h1>
<div class="std-code"><pre class="prismjs ts rally-runner  "><span style="user-select:none" class="line-numbers-rows">00</span><span class="token comment">// 长度为 1 的字符串数字</span>
<span style="user-select:none" class="line-numbers-rows">01</span><span class="token keyword">type</span> <span class="token class-name">Numberic</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
<span style="user-select:none" class="line-numbers-rows">02</span>    <span class="token string">&#x27;0&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;1&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;2&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;3&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;4&#x27;</span> <span class="token operator">|</span>
<span style="user-select:none" class="line-numbers-rows">03</span>    <span class="token string">&#x27;5&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;6&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;7&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;8&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;9&#x27;</span>
<span style="user-select:none" class="line-numbers-rows">04</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">05</span>
<span style="user-select:none" class="line-numbers-rows">06</span><span class="token comment">// 取头部</span>
<span style="user-select:none" class="line-numbers-rows">07</span><span class="token comment">// HeadOf&lt;&#x27;1234&#x27;&gt; ==&gt; &#x27;123&#x27;</span>
<span style="user-select:none" class="line-numbers-rows">08</span><span class="token keyword">type</span> <span class="token class-name">HeadOf<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Before<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Numberic<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> Before <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span></pre></div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">取出头部 HeadOf 是很常用的工具，比方说实现加法里面 HeadOf 就是数字的除十操作。</div>
<h1 id="tail-类型-template-条件-infer-递归" class="std-title --fontTitle"><a target="_blank" href="#tail-类型-template-条件-infer-递归" class="markdownIt-Anchor">#</a> Tail 类型 :: Template 条件 infer 递归<i data-minimap="Ignore"> ↵ </i></h1>
<div class="std-code"><pre class="prismjs ts rally-runner  "><span style="user-select:none" class="line-numbers-rows">00</span><span class="token comment">// 取尾部</span>
<span style="user-select:none" class="line-numbers-rows">01</span><span class="token comment">// Tail&lt;&#x27;1234&#x27;&gt; ===&gt; &#x27;4&#x27;</span>
<span style="user-select:none" class="line-numbers-rows">02</span><span class="token keyword">type</span> <span class="token class-name">Tail<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>
<span style="user-select:none" class="line-numbers-rows">03</span>    <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Numberic<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Rest<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span style="user-select:none" class="line-numbers-rows">04</span>        <span class="token comment">// 满足上面的情况下且 Rest 是 `` 的时候 说明已经到底了 返回 S 即可，否则递归处理</span>
<span style="user-select:none" class="line-numbers-rows">05</span>        <span class="token operator">?</span> Rest <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token constant">S</span> <span class="token operator">:</span> Tail<span class="token operator">&lt;</span>Rest<span class="token operator">&gt;</span>
<span style="user-select:none" class="line-numbers-rows">06</span>        <span class="token operator">:</span> <span class="token builtin">never</span>
<span style="user-select:none" class="line-numbers-rows">07</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">取出尾部 Tail 也是很常用的工具，比方说实现加法里面 Tail 就是数字的对十取模操作 (求个位数)。</div>
<h1 id="trim-类型-template-条件-infer-递归" class="std-title --fontTitle"><a target="_blank" href="#trim-类型-template-条件-infer-递归" class="markdownIt-Anchor">#</a> Trim 类型 :: Template 条件 infer 递归<i data-minimap="Ignore"> ↵ </i></h1>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">按照 js 的语意实现对字符串类型的 trim :</div>
<div class="std-code"><pre class="prismjs ts rally-runner  "><span style="user-select:none" class="line-numbers-rows">00</span><span class="token comment">// 工具函数</span>
<span style="user-select:none" class="line-numbers-rows">01</span><span class="token comment">// Trim&lt;&quot; var Eczn   &quot;&gt; ===&gt; &quot;var Eczn&quot;</span>
<span style="user-select:none" class="line-numbers-rows">02</span><span class="token comment">// 先递归 TrimRight 再 TrimLeft</span>
<span style="user-select:none" class="line-numbers-rows">03</span><span class="token keyword">type</span> <span class="token class-name">Trim<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>
<span style="user-select:none" class="line-numbers-rows">04</span>    <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Before<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token template-punctuation string">`</span></span>
<span style="user-select:none" class="line-numbers-rows">05</span>        <span class="token operator">?</span> Trim<span class="token operator">&lt;</span>Before<span class="token operator">&gt;</span>
<span style="user-select:none" class="line-numbers-rows">06</span>        <span class="token operator">:</span> <span class="token punctuation">(</span>
<span style="user-select:none" class="line-numbers-rows">07</span>            <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> After<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span style="user-select:none" class="line-numbers-rows">08</span>                <span class="token operator">?</span> Trim<span class="token operator">&lt;</span>After<span class="token operator">&gt;</span>
<span style="user-select:none" class="line-numbers-rows">09</span>                <span class="token operator">:</span> <span class="token constant">S</span>
<span style="user-select:none" class="line-numbers-rows">10</span>        <span class="token punctuation">)</span>
<span style="user-select:none" class="line-numbers-rows">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">12</span>
<span style="user-select:none" class="line-numbers-rows">13</span><span class="token keyword">type</span> <span class="token class-name">testTrim</span> <span class="token operator">=</span> Trim<span class="token operator">&lt;</span><span class="token string">&#x27;  var Eczn &#x27;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">14</span><span class="token comment">// =&gt; &#x27;var Eczn&#x27;</span></pre></div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">引入 trim 是为了处理字符串两端中多余的空格</div>
<h1 id="kvpair-的定义和拍平" class="std-title --fontTitle"><a target="_blank" href="#kvpair-的定义和拍平" class="markdownIt-Anchor">#</a> KVPair 的定义和拍平<i data-minimap="Ignore"> ↵ </i></h1>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">在处理复杂类型问题的时候总要引入点中间类型来方便转换，比方这里介绍的 KVPair, 他长这样：</div>
<div class="std-code"><pre class="prismjs tsx rally-runner  "><span style="user-select:none" class="line-numbers-rows">00</span>type <span class="token constant">KVP</span><span class="token operator">&lt;</span><span class="token constant">K</span><span class="token punctuation">,</span> <span class="token constant">V</span><span class="token punctuation">,</span> Rest<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">,</span> <span class="token constant">V</span><span class="token punctuation">,</span> Rest<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">01</span>
<span style="user-select:none" class="line-numbers-rows">02</span><span class="token comment">// 递归定义了一下</span>
<span style="user-select:none" class="line-numbers-rows">03</span>type test <span class="token operator">=</span> <span class="token constant">KVP</span><span class="token operator">&lt;</span><span class="token string">&#x27;key1&#x27;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token constant">KVP</span><span class="token operator">&lt;</span><span class="token string">&#x27;key2&#x27;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">04</span><span class="token comment">// 上面这个通过某种递归转换可以拍平为 { key1:1, key2:2 }</span>
<span style="user-select:none" class="line-numbers-rows">05</span><span class="token comment">// 这个变换后文会提到</span></pre></div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">这个结构其实跟 Scheme 里的 cons 结构是类似的，可以用来做函数式数据结构，额 … 总之这个结构可以不需要下标即可遍历，在 TS 里做遍历很重要的一种结构</div>
<hr class="std-hr"/>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">上面应该已经提过了中间结构 KVP，我们需要利用这种结构生成对象类型出来，比如:</div>
<div class="std-code"><pre class="prismjs ts rally-runner  "><span style="user-select:none" class="line-numbers-rows">00</span><span class="token comment">// 下面这个可以拍平为 { k1: 123 }</span>
<span style="user-select:none" class="line-numbers-rows">01</span><span class="token keyword">type</span> <span class="token class-name">p1</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;k1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">02</span>
<span style="user-select:none" class="line-numbers-rows">03</span><span class="token comment">// 下面这个可以拍平为 { k1: 123, k2: &quot;2&quot; }</span>
<span style="user-select:none" class="line-numbers-rows">04</span><span class="token keyword">type</span> <span class="token class-name">p2</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
<span style="user-select:none" class="line-numbers-rows">05</span>    <span class="token string">&quot;k1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">,</span>
<span style="user-select:none" class="line-numbers-rows">06</span>    <span class="token punctuation">[</span><span class="token string">&quot;k2&quot;</span><span class="token punctuation">,</span> <span class="token string">&#x27;&quot;2&quot;&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">]</span>
<span style="user-select:none" class="line-numbers-rows">07</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">08</span>
<span style="user-select:none" class="line-numbers-rows">09</span><span class="token comment">// 下面这个可以拍平为 { k1: 123, inner: { k3: 3 }, k2: &quot;2&quot; }</span>
<span style="user-select:none" class="line-numbers-rows">10</span><span class="token keyword">type</span> <span class="token class-name">p3</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
<span style="user-select:none" class="line-numbers-rows">11</span>    <span class="token string">&quot;k1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">,</span>
<span style="user-select:none" class="line-numbers-rows">12</span>    <span class="token punctuation">[</span><span class="token string">&quot;inner&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;k3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;k2&quot;</span><span class="token punctuation">,</span> <span class="token string">&#x27;&quot;2&quot;&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span style="user-select:none" class="line-numbers-rows">13</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">那么如何从 KVPair 里生成对象呢 ? 我们看到 KVPair 是递归的，可以通过递归遍历的形式来遍历操作，在遍历的过程中即可实现转对象的操作</div>
<div class="std-code"><pre class="prismjs ts rally-runner  "><span style="user-select:none" class="line-numbers-rows">00</span><span class="token comment">// 判断 V 是不是 KVP 结构，是的话用 KVPairsToObj 处理，否则返回其自身</span>
<span style="user-select:none" class="line-numbers-rows">01</span><span class="token keyword">type</span> <span class="token class-name">MaybeKVP<span class="token operator">&lt;</span><span class="token constant">V</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">V</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token punctuation">]</span> <span class="token operator">?</span> KVPairsToObj<span class="token operator">&lt;</span><span class="token constant">V</span><span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token constant">V</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">02</span>
<span style="user-select:none" class="line-numbers-rows">03</span><span class="token comment">// 将递归的 KVParis 压平 ...</span>
<span style="user-select:none" class="line-numbers-rows">04</span><span class="token keyword">type</span> <span class="token class-name">KVPairsToObj<span class="token operator">&lt;</span><span class="token constant">P</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">P</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> <span class="token constant">K</span><span class="token punctuation">,</span> <span class="token keyword">infer</span> <span class="token constant">V</span><span class="token punctuation">,</span> <span class="token keyword">infer</span> Rest<span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token punctuation">(</span>
<span style="user-select:none" class="line-numbers-rows">05</span>    <span class="token comment">// 先确保 K 可以作为 Key ... 否则我们返回 P 自己</span>
<span style="user-select:none" class="line-numbers-rows">06</span>    <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">symbol</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">(</span>
<span style="user-select:none" class="line-numbers-rows">07</span>        Rest <span class="token keyword">extends</span> <span class="token class-name"><span class="token keyword">null</span></span>
<span style="user-select:none" class="line-numbers-rows">08</span>            <span class="token comment">// 如果说 Rest 是 null ... 则说明递归到底了, 直接返回 { [K]: V } 即可, 但 V 也有可能是 KVP 因此要 MaybeKVP&lt;V&gt; 递归一下</span>
<span style="user-select:none" class="line-numbers-rows">09</span>            <span class="token operator">?</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token constant">INNERKEY</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> MaybeKVP<span class="token operator">&lt;</span><span class="token constant">V</span><span class="token operator">&gt;</span> <span class="token punctuation">}</span>
<span style="user-select:none" class="line-numbers-rows">10</span>            <span class="token comment">// 如果说 Rest 有东西则说明我们需要递归进一步处理</span>
<span style="user-select:none" class="line-numbers-rows">11</span>            <span class="token comment">// 注意 INNERKEY 的取值为当前的 K 以及 keyof KVPairsToObj&lt;Rest&gt;, 是的需要在递归里面用到递归的结果</span>
<span style="user-select:none" class="line-numbers-rows">12</span>            <span class="token comment">// 然后判断 INNERKEY 是不是 K 如果是的话返回 MaybeKVP&lt;V&gt;</span>
<span style="user-select:none" class="line-numbers-rows">13</span>            <span class="token comment">// 否则返回 KVPairsToObj&lt;Rest&gt;[INNERKEY]</span>
<span style="user-select:none" class="line-numbers-rows">14</span>            <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token constant">INNERKEY</span> <span class="token keyword">in</span> <span class="token constant">K</span> <span class="token operator">|</span> <span class="token keyword">keyof</span> KVPairsToObj<span class="token operator">&lt;</span>Rest<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">INNERKEY</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">K</span></span> <span class="token operator">?</span> MaybeKVP<span class="token operator">&lt;</span><span class="token constant">V</span><span class="token operator">&gt;</span> <span class="token operator">:</span> KVPairsToObj<span class="token operator">&lt;</span>Rest<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token constant">INNERKEY</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span style="user-select:none" class="line-numbers-rows">15</span>    <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token builtin">never</span>
<span style="user-select:none" class="line-numbers-rows">16</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span></pre></div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">注意上面的 <code>INNERKEY</code> 那块，仔细揣摩 <code>KVPairsToObj&lt;Rest&gt;</code> 的含义以及 <code>KVPairsToObj&lt;Rest&gt;[INNERKEY]</code> 代表什么就能看懂了。另外推荐在 <a target="_blank" href="https://www.typescriptlang.org/play?ts=4.1.0-pr-40336-88#code/PTAEhIlRa01A1VHozQsHL1AaRgBVIZb9Ah5oGH-5AQt0F3owClc1MBDASwCcBnAFQHsB5AIwCtRAQTUDAXfIDIVQJhKgFfjAe2qA3RUBXgYGq4gLAAoAC4BPAA4BTUAFkqajlvQYAPDAB8oALyxQWgB4qtAOwAmDUAG0GKujRcAcwAaUF9-INCqFzUAXVAAfkoMWkZWTi5zKwAuWABuZWUQUEAwHUAkBMAlfSJkqn9PQGjlQGc9UAA6NuV1bRr6ZnZuUwwrWyxHZ3dPLwCAMy06NFDp2dgFlxm5gCUtX3ikgAplUEPQYsAJRUA7D0Bd+TRQQHvlQFO5QB15QC45NC01VrbQUUBEI0AbuUlQFgZIBH3QOR1Q9icrg8oF24QCgVAAB9QC4AK4AWyMcxRDDUWJYABsAJSJWFgo5HTa+SFjGHowmEimUlnFQBBmoAc80AL9GgakqBCotGMj4tUAiLmAODNKoAGJUAqXqAMLlQoAXt0ApcYAgDe3lQsVycAAvqBAM7KN1CgDF5OyAfTlAJDmN0AvwEoEygQAHaoATa0AgZF6AxGExZUCVQAAcoBoOWZLKOSU1XgAkgA5aMAUXWqDjAE1QAE0DrPYZjJhfXqQ6HjmBOTy+aArYAcOUA-pHiiV-QAA6W7KoBt+P9gFNrAQF0PFQAXNoB4Q1AMfjiZToCIgDXlQA8Ck9AMr6gFklaoQu6AKeVQABrN4sKbdNJ9TJ8iyhYiNwAU6pVADOJgCN0sjSypEbAcrussCANkdAHAqUEHsYTSdTSAdoCcsQJAAvo2Y+pYT6UsUogAiYqS9BkpgHlG34jsmsRQUcuQRkOP6jumEIohuahbjuiH9AemZ4ehtLQp4EJJGB3q5pYoC5PBPTpJRWwqBYqHDr+8T5kolKkrkLhaAAbrMyjiai0mzAUShFGAgaXoAm-GAFRy9yALNGjQvJqa4AIy5MZABMADMoAiZ0OgAPr2Swxk2OR3GZF4ABEJmeaEnkWZZvmCoysQWMpqmgOp2l6QZoBGaZoABaEa7mbknnmZ5NkdJoDlOeZrmcbuSFeMy3nGUF-lWb5zJeSlQUAOTpZ59WhAyhKYUooXhUoxRRTpdz6YZ64JUlaYuJJdA4eulm5NZerJaloBNVlqg5aAjkAAzWbYhUUR5pU+X5AXVaJRxeQEE1BbVgV+TdwXtaEtUZaEjUZS192xB1XXKEAA" style="background-color:#dee2ee" class="std-link --fontSansSerif  _line" data-minimap-color="#dee2ee"><span class="std-link-icon r-link" data-src="/get-favicon/www.typescriptlang.org?h=-12371019245" style="background-image:url(&quot;/get-favicon/www.typescriptlang.org?h=-12371019245&quot;)"></span><span class="std-link-txt">Eczn’s TypeScript Playground :: KVPairs</span></a> 里查看上述代码，KM 这里代码显示不好看。</div>
<h1 id="json-parser-的实现" class="std-title --fontTitle"><a target="_blank" href="#json-parser-的实现" class="markdownIt-Anchor">#</a> JSON Parser 的实现<i data-minimap="Ignore"> ↵ </i></h1>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">实现 JSON Parser 关键是从从 raw json string 生成 KVPair，然后借助前文提到的拍平 KVPair 的工具类型去拍平为对象类型:</div>
<div class="std-code"><pre class="prismjs ts rally-runner  "><span style="user-select:none" class="line-numbers-rows">00</span><span class="token comment">// 从 &quot;  { XXXX }   &quot; 中取出 XXXX 来 (即取出 json kv string map)</span>
<span style="user-select:none" class="line-numbers-rows">01</span><span class="token keyword">type</span> <span class="token class-name">SplitKVStringFrom<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> AnyBlank<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">{</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">INNER</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">}</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> AnyBlank<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> KVPairs<span class="token operator">&lt;</span><span class="token constant">INNER</span><span class="token operator">&gt;</span> <span class="token operator">:</span> Trim<span class="token operator">&lt;</span><span class="token constant">S</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">02</span>
<span style="user-select:none" class="line-numbers-rows">03</span><span class="token comment">// 从 json kv string map 生成一种递归的结构 Pair = [K, V, Pair&lt;string, any&gt;] 表达一个对象的信息</span>
<span style="user-select:none" class="line-numbers-rows">04</span><span class="token keyword">type</span> <span class="token class-name">KVPairs<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>
<span style="user-select:none" class="line-numbers-rows">05</span>    <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> AnyBlank<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> AnyBlank<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Rest<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span style="user-select:none" class="line-numbers-rows">06</span>        <span class="token operator">?</span> Rest <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Rest<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token punctuation">[</span>Key<span class="token punctuation">,</span> SplitKVStringFrom<span class="token operator">&lt;</span>Value<span class="token operator">&gt;</span><span class="token punctuation">,</span> KVPairs<span class="token operator">&lt;</span>Rest<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span>Key<span class="token punctuation">,</span> SplitKVStringFrom<span class="token operator">&lt;</span>Rest<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">]</span>
<span style="user-select:none" class="line-numbers-rows">07</span>        <span class="token operator">:</span> Trim<span class="token operator">&lt;</span><span class="token constant">S</span><span class="token operator">&gt;</span>
<span style="user-select:none" class="line-numbers-rows">08</span><span class="token punctuation">)</span>
<span style="user-select:none" class="line-numbers-rows">09</span>
<span style="user-select:none" class="line-numbers-rows">10</span><span class="token comment">// 原始信息</span>
<span style="user-select:none" class="line-numbers-rows">11</span><span class="token keyword">type</span> <span class="token class-name">myjson</span> <span class="token operator">=</span> <span class="token string">&#x27;{ &quot;k1&quot;  :&quot;v1&quot; , &quot;wow&quot;: { &quot;eczn&quot;: &quot;喵&quot; }, &quot;k2&quot;:   &quot;v2&quot;,&quot;k3&quot;:333, &quot;rrr&quot;: { &quot;inner&quot;: &quot;abc&quot; }  }&#x27;</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">12</span>
<span style="user-select:none" class="line-numbers-rows">13</span><span class="token comment">// 中间 AST 表达</span>
<span style="user-select:none" class="line-numbers-rows">14</span><span class="token keyword">type</span> <span class="token class-name">myparis</span> <span class="token operator">=</span> KVPairs<span class="token operator">&lt;</span>myjson<span class="token operator">&gt;</span><span class="token punctuation">;</span></pre></div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">最后一步将将 KVPair 转对象类型，这里需借助 前文的 KVPairsToObj 即可实现，详见在线 DEMO： <a target="_blank" href="https://www.typescriptlang.org/play?ts=4.1.0-pr-40336-88#code/PTAEhIlRa01A1VHozQsHL1AaRgBVIZb9Ah5oGH-5AQt0F3owClc1MBDASwCcBnAFQHsB5AIwCtRAQTUDAXfIDIVQJhKgFfjAe2qA3RUBXgYGq4gLAAoAC4BPAA4BTUAFkqajlvQYAPDAB8oALyxQWgB4qtAOwAmDUAG0GKujRcAcwAaUF9-INCqFzUAXVAAfkoMWkZWTi5zKwAuWABuZWUQUEAwHUAkBMAlfSJkqn9PQGjlQGc9UAA6NuV1bRr6ZnZuUwwrWyxHZ3dPLwCAMy06NFDp2dgFlxm5gCUtX3ikgAplUEPQYsAJRUA7D0Bd+TRQQHvlQFO5QB15QC45NC01VrbQUUBEI0AbuUlQFgZIBH3QOR1Q9icrg8oF24QCgVAAB9QC4AK4AWyMcxRDDUWJYABsAJSJWFgo5HTa+SFjGHowmEimUlnFQBBmoAc80AL9GgakqBCotGMj4tUAiLmAODNKoAGJUAqXqAMLlQoAXt0ApcYAgDe3lQsVycAAvqBAM7KN1CgDF5OyAfTlAJDmN0AvwEoEygQAHaoATa0AgZF6AxGExZUCVQAAcoBoOWZLKOSU1XgAkgA5aMAUXWqDjAE1QAE0DrPYZjJhfXqQ6HjmBOTy+aArYAcOUA-pHiiV-QAA6W7KoBt+P9gFNrAQF0PFQAXNoB4Q1AMfjiZToCIgDXlQA8Ck9AMr6gFklaoQu6AKeVQABrN4sKbdNJ9TJ8iyhYiNwAU6pVADOJgCN0sjSypEbAcrussCANkdAHAqUEHsYTSdTSAdoCcsQJAAvo2Y+pYT6UsUogAiYqS9BkpgHlG34jsmsRQUcuQRkOP6jumEIohuahbjuiH9AemZ4ehtLQp4EJJGB3q5pYoC5PBPTpJRWwqBYqHDr+8T5kolKkrkLhaAAbrMyjiai0mzAUSiFEoxSAKe6gDuioAv4qAA6mRRgEw-gYqYABEoBSbUoBxgAxgAXi4RymUM1jWFYpmWXMtkOaZBmgCclSgEZNAYusNCBAAFvygCxikFxkADJaFMKgdJoOjBSZADKdHjGEfgIkM5KiUc2WjPRoAAAYACTqoscwAEJJSwdBaAaFVPkkGWmI1UzNVoFhPrk+zFYWJU5TCFWgDVdWgAAgslsx6u1I2jSynXGaY83OHQA0rat2GgJlT7EnJyl+YAc3KgOZoCagAGvdt2gAahzmYAtHLjoAX4qgA9j2AKbmsKGp9oBcAwLCOWuUl5REiIYlQGgnaoaWHRohI0Co6CZflQQAGJ0CwWXjZ48JBIVpVQrl1W1asSyzTE9WEtEa56uq03U3MNF6nqrNrHNdMMy4TOTUkABSmVsNGAD6TBsBLnGMKYNE5HFIWmJlFhnWpYCXSDYPrpDxMw3DoCAPiugAIRv6gCznneeCAqkNhaqEMChCk9CmAbUQxBY8SABYRgB98f6gBUcoAn9qAIYxRCAIfygD2BqlXSi+LUsy3LDCq4TUMFfbw3QWAn4645eDMmTdKeJTM202o9OM3qpnc0sqBvFXNdzGXFcC3q2SN7yvFLU+xSAOd+gC3flA+C4IABAnJDguAdZ3NJlRTHcwFQhJoq1wQd3yS1kl4ddqKEmUo2jGNY4EuP4+Yi-L4eoBx5L0uy9QPTIbxXvsVqby7-v6MwJj0MnyZB6hAyQkmE9pHGKIAOzNABYCZOAEGUjQ3EGsrLKu0EaqWKIAfOVADTmlHGOOgMRqFzvbAA5JqUya4ACM11sgeQoaAUIpkADuLB6GmRwldLQ9kXAsKuoAVtVzJ6joWuAATFwl6UlhHBFIQAZhYZI2RdC6AKK4SQgIkk6BcNMlQDgNk+GHD1IQjWxRXqABfUuamUmCgD9jg0AeCNC1BoJ4Ww18E53xdvLPBud1aoLAIAAHNAATfvnRGXQ8EsG4PbJO3FMg2LsQwXaqkgA" style="background-color:#e3f3f4" class="std-link --fontSansSerif  _line" data-minimap-color="#e3f3f4"><span class="std-link-icon r-link" data-src="/get-favicon/www.typescriptlang.org?h=-11579307710" style="background-image:url(&quot;/get-favicon/www.typescriptlang.org?h=-11579307710&quot;)"></span><span class="std-link-txt">Eczn’s TypeScript Playground :: Type Parser For JSON</span></a></div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">本文目的不是实现无懈可击的 json parser 而是介绍 template 写 parser 的思路，上述实现并不完整还差数字和数组没有处理，只实现了一个子集，有兴趣的同学可以自行补全这块。</div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC"><div class="std-img"><img class="std-img-bg r-link" data-minimap="Rect" src="/images/typescript-tamplate-type/1599490540_32_w2294_h144.png" alt="enter image description here"/><div class="std-img-text">enter image description here</div></div></div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC"><div class="std-img"><img class="std-img-bg r-link" data-minimap="Rect" src="/images/typescript-tamplate-type/1599490559_10_w820_h538.png" alt="enter image description here"/><div class="std-img-text">enter image description here</div></div></div>
<h1 id="实现加法算数运算" class="std-title --fontTitle"><a target="_blank" href="#实现加法算数运算" class="markdownIt-Anchor">#</a> 实现加法算数运算<i data-minimap="Ignore"> ↵ </i></h1>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">算数运算主要还是半加器、进位等这套来做的，当然也可以利用 Church Encoding 来实现，我再实现的过程中用了前者的思路：</div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">首先要描述个位数，半加器要用</div>
<div class="std-code"><pre class="prismjs ts rally-runner  "><span style="user-select:none" class="line-numbers-rows">00</span><span class="token comment">// 描述个位数</span>
<span style="user-select:none" class="line-numbers-rows">01</span><span class="token keyword">type</span> <span class="token class-name">Numberic</span> <span class="token operator">=</span> <span class="token string">&#x27;0&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;1&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;2&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;3&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;4&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;5&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;6&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;7&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;8&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;9&#x27;</span><span class="token punctuation">;</span></pre></div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">然后需要定义个位数的加法，也就是定义好半加器，而定义需要下点小手段，穷举定义的话会比较多代码，简化一下利用递归自增的形式来定义个位数的加法：</div>
<div class="std-code"><pre class="prismjs ts rally-runner  "><span style="user-select:none" class="line-numbers-rows">00</span><span class="token comment">// 定义 0 ~ 18 自增规则</span>
<span style="user-select:none" class="line-numbers-rows">01</span><span class="token comment">// 如 IncOne&lt;&#x27;9&#x27;, &#x27;1&#x27;&gt; ===&gt; &#x27;10&#x27;</span>
<span style="user-select:none" class="line-numbers-rows">02</span><span class="token keyword">type</span> <span class="token class-name">IncOne<span class="token operator">&lt;</span><span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>
<span style="user-select:none" class="line-numbers-rows">03</span>    <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token string">&#x27;0&#x27;</span> <span class="token operator">?</span> <span class="token string">&#x27;1&#x27;</span>  <span class="token operator">:</span>   <span class="token comment">// 0 + 1 = 1</span>
<span style="user-select:none" class="line-numbers-rows">04</span>    <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token string">&#x27;1&#x27;</span> <span class="token operator">?</span> <span class="token string">&#x27;2&#x27;</span>  <span class="token operator">:</span>   <span class="token comment">// 1 + 1 = 2</span>
<span style="user-select:none" class="line-numbers-rows">05</span>    <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token string">&#x27;2&#x27;</span> <span class="token operator">?</span> <span class="token string">&#x27;3&#x27;</span>  <span class="token operator">:</span>   <span class="token comment">// 2 + 1 = 3</span>
<span style="user-select:none" class="line-numbers-rows">06</span>    <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token string">&#x27;3&#x27;</span> <span class="token operator">?</span> <span class="token string">&#x27;4&#x27;</span>  <span class="token operator">:</span>   <span class="token comment">// 3 + 1 = 4</span>
<span style="user-select:none" class="line-numbers-rows">07</span>    <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token string">&#x27;4&#x27;</span> <span class="token operator">?</span> <span class="token string">&#x27;5&#x27;</span>  <span class="token operator">:</span>   <span class="token comment">// 4 + 1 = 5</span>
<span style="user-select:none" class="line-numbers-rows">08</span>    <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token string">&#x27;5&#x27;</span> <span class="token operator">?</span> <span class="token string">&#x27;6&#x27;</span>  <span class="token operator">:</span>   <span class="token comment">// 5 + 1 = 6</span>
<span style="user-select:none" class="line-numbers-rows">09</span>    <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token string">&#x27;6&#x27;</span> <span class="token operator">?</span> <span class="token string">&#x27;7&#x27;</span>  <span class="token operator">:</span>   <span class="token comment">// 6 + 1 = 7</span>
<span style="user-select:none" class="line-numbers-rows">10</span>    <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token string">&#x27;7&#x27;</span> <span class="token operator">?</span> <span class="token string">&#x27;8&#x27;</span>  <span class="token operator">:</span>   <span class="token comment">// 7 + 1 = 8</span>
<span style="user-select:none" class="line-numbers-rows">11</span>    <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token string">&#x27;8&#x27;</span> <span class="token operator">?</span> <span class="token string">&#x27;9&#x27;</span>  <span class="token operator">:</span>   <span class="token comment">// 8 + 1 = 9</span>
<span style="user-select:none" class="line-numbers-rows">12</span>    <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token string">&#x27;9&#x27;</span> <span class="token operator">?</span> <span class="token string">&#x27;10&#x27;</span> <span class="token operator">:</span>   <span class="token comment">// 9 + 1 = 10</span>
<span style="user-select:none" class="line-numbers-rows">13</span>    <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token string">&#x27;10&#x27;</span> <span class="token operator">?</span> <span class="token string">&#x27;11&#x27;</span> <span class="token operator">:</span>  <span class="token comment">// 9 + 1 = 10</span>
<span style="user-select:none" class="line-numbers-rows">14</span>    <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token string">&#x27;11&#x27;</span> <span class="token operator">?</span> <span class="token string">&#x27;12&#x27;</span> <span class="token operator">:</span>  <span class="token comment">// 9 + 1 = 10</span>
<span style="user-select:none" class="line-numbers-rows">15</span>    <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token string">&#x27;12&#x27;</span> <span class="token operator">?</span> <span class="token string">&#x27;13&#x27;</span> <span class="token operator">:</span>  <span class="token comment">// 9 + 1 = 10</span>
<span style="user-select:none" class="line-numbers-rows">16</span>    <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token string">&#x27;13&#x27;</span> <span class="token operator">?</span> <span class="token string">&#x27;14&#x27;</span> <span class="token operator">:</span>  <span class="token comment">// 9 + 1 = 10</span>
<span style="user-select:none" class="line-numbers-rows">17</span>    <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token string">&#x27;14&#x27;</span> <span class="token operator">?</span> <span class="token string">&#x27;15&#x27;</span> <span class="token operator">:</span>  <span class="token comment">// 9 + 1 = 10</span>
<span style="user-select:none" class="line-numbers-rows">18</span>    <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token string">&#x27;15&#x27;</span> <span class="token operator">?</span> <span class="token string">&#x27;16&#x27;</span> <span class="token operator">:</span>  <span class="token comment">// 9 + 1 = 10</span>
<span style="user-select:none" class="line-numbers-rows">19</span>    <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token string">&#x27;16&#x27;</span> <span class="token operator">?</span> <span class="token string">&#x27;17&#x27;</span> <span class="token operator">:</span>  <span class="token comment">// 9 + 1 = 10</span>
<span style="user-select:none" class="line-numbers-rows">20</span>    <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token string">&#x27;17&#x27;</span> <span class="token operator">?</span> <span class="token string">&#x27;18&#x27;</span> <span class="token operator">:</span>  <span class="token comment">// 9 + 1 = 10</span>
<span style="user-select:none" class="line-numbers-rows">21</span>    <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token string">&#x27;18&#x27;</span> <span class="token operator">?</span> <span class="token string">&#x27;19&#x27;</span> <span class="token operator">:</span>  <span class="token comment">// 9 + 1 = 10</span>
<span style="user-select:none" class="line-numbers-rows">22</span>    <span class="token builtin">never</span>
<span style="user-select:none" class="line-numbers-rows">23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">24</span>
<span style="user-select:none" class="line-numbers-rows">25</span><span class="token comment">// 由 IncOne 定义 0 ~ 9 范围内的任意加法 [0, 9] + [0, 9]</span>
<span style="user-select:none" class="line-numbers-rows">26</span><span class="token comment">// 如 IncX&lt;&#x27;9&#x27;, &#x27;9&#x27;&gt; ===&gt; &#x27;18&#x27;</span>
<span style="user-select:none" class="line-numbers-rows">27</span><span class="token keyword">type</span> <span class="token class-name">IncX<span class="token operator">&lt;</span><span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token constant">B</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>
<span style="user-select:none" class="line-numbers-rows">28</span>    <span class="token constant">B</span> <span class="token keyword">extends</span> <span class="token string">&#x27;0&#x27;</span> <span class="token operator">?</span> <span class="token constant">A</span>  <span class="token operator">:</span>  <span class="token comment">// 0 + 1 = 1</span>
<span style="user-select:none" class="line-numbers-rows">29</span>    <span class="token constant">B</span> <span class="token keyword">extends</span> <span class="token string">&#x27;1&#x27;</span> <span class="token operator">?</span> IncX<span class="token operator">&lt;</span>IncOne<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token string">&#x27;0&#x27;</span><span class="token operator">&gt;</span>  <span class="token operator">:</span>  <span class="token comment">// 1 + 1 = 2</span>
<span style="user-select:none" class="line-numbers-rows">30</span>    <span class="token constant">B</span> <span class="token keyword">extends</span> <span class="token string">&#x27;2&#x27;</span> <span class="token operator">?</span> IncX<span class="token operator">&lt;</span>IncOne<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token string">&#x27;1&#x27;</span><span class="token operator">&gt;</span>  <span class="token operator">:</span>  <span class="token comment">// 2 + 1 = 3</span>
<span style="user-select:none" class="line-numbers-rows">31</span>    <span class="token constant">B</span> <span class="token keyword">extends</span> <span class="token string">&#x27;3&#x27;</span> <span class="token operator">?</span> IncX<span class="token operator">&lt;</span>IncOne<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token string">&#x27;2&#x27;</span><span class="token operator">&gt;</span>  <span class="token operator">:</span>  <span class="token comment">// 3 + 1 = 4</span>
<span style="user-select:none" class="line-numbers-rows">32</span>    <span class="token constant">B</span> <span class="token keyword">extends</span> <span class="token string">&#x27;4&#x27;</span> <span class="token operator">?</span> IncX<span class="token operator">&lt;</span>IncOne<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token string">&#x27;3&#x27;</span><span class="token operator">&gt;</span>  <span class="token operator">:</span>  <span class="token comment">// 4 + 1 = 5</span>
<span style="user-select:none" class="line-numbers-rows">33</span>    <span class="token constant">B</span> <span class="token keyword">extends</span> <span class="token string">&#x27;5&#x27;</span> <span class="token operator">?</span> IncX<span class="token operator">&lt;</span>IncOne<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token string">&#x27;4&#x27;</span><span class="token operator">&gt;</span>  <span class="token operator">:</span>  <span class="token comment">// 5 + 1 = 6</span>
<span style="user-select:none" class="line-numbers-rows">34</span>    <span class="token constant">B</span> <span class="token keyword">extends</span> <span class="token string">&#x27;6&#x27;</span> <span class="token operator">?</span> IncX<span class="token operator">&lt;</span>IncOne<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token string">&#x27;5&#x27;</span><span class="token operator">&gt;</span>  <span class="token operator">:</span>  <span class="token comment">// 6 + 1 = 7</span>
<span style="user-select:none" class="line-numbers-rows">35</span>    <span class="token constant">B</span> <span class="token keyword">extends</span> <span class="token string">&#x27;7&#x27;</span> <span class="token operator">?</span> IncX<span class="token operator">&lt;</span>IncOne<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token string">&#x27;6&#x27;</span><span class="token operator">&gt;</span>  <span class="token operator">:</span>  <span class="token comment">// 7 + 1 = 8</span>
<span style="user-select:none" class="line-numbers-rows">36</span>    <span class="token constant">B</span> <span class="token keyword">extends</span> <span class="token string">&#x27;8&#x27;</span> <span class="token operator">?</span> IncX<span class="token operator">&lt;</span>IncOne<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token string">&#x27;7&#x27;</span><span class="token operator">&gt;</span>  <span class="token operator">:</span>  <span class="token comment">// 8 + 1 = 9</span>
<span style="user-select:none" class="line-numbers-rows">37</span>    <span class="token constant">B</span> <span class="token keyword">extends</span> <span class="token string">&#x27;9&#x27;</span> <span class="token operator">?</span> IncX<span class="token operator">&lt;</span>IncOne<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token string">&#x27;8&#x27;</span><span class="token operator">&gt;</span>  <span class="token operator">:</span>  <span class="token comment">// 9 + 1 = 10</span>
<span style="user-select:none" class="line-numbers-rows">38</span>    <span class="token constant">A</span>
<span style="user-select:none" class="line-numbers-rows">39</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">然后取出个位数和十位数的这些可以使用本文一开始的 HeadOf 和 Tail，最后整理一下：</div>
<div class="std-code"><pre class="prismjs ts rally-runner  "><span style="user-select:none" class="line-numbers-rows">00</span><span class="token comment">// 加法: A B 为加数, C 是进位, 默认为 0</span>
<span style="user-select:none" class="line-numbers-rows">01</span><span class="token keyword">type</span> <span class="token class-name">Add<span class="token operator">&lt;</span><span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token constant">B</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token constant">C</span> <span class="token keyword">extends</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&#x27;0&#x27;</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>
<span style="user-select:none" class="line-numbers-rows">02</span>    <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token string">&#x27;&#x27;</span>  <span class="token operator">?</span> <span class="token constant">C</span> <span class="token keyword">extends</span> <span class="token string">&#x27;1&#x27;</span> <span class="token operator">?</span> Add<span class="token operator">&lt;</span><span class="token constant">B</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token constant">B</span> <span class="token operator">:</span>
<span style="user-select:none" class="line-numbers-rows">03</span>    <span class="token constant">B</span> <span class="token keyword">extends</span> <span class="token string">&#x27;&#x27;</span>  <span class="token operator">?</span> <span class="token constant">C</span> <span class="token keyword">extends</span> <span class="token string">&#x27;1&#x27;</span> <span class="token operator">?</span> Add<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token constant">A</span> <span class="token operator">:</span>
<span style="user-select:none" class="line-numbers-rows">04</span>    <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token string">&#x27;0&#x27;</span> <span class="token operator">?</span> <span class="token constant">C</span> <span class="token keyword">extends</span> <span class="token string">&#x27;1&#x27;</span> <span class="token operator">?</span> Add<span class="token operator">&lt;</span><span class="token constant">B</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token constant">B</span> <span class="token operator">:</span>
<span style="user-select:none" class="line-numbers-rows">05</span>    <span class="token constant">B</span> <span class="token keyword">extends</span> <span class="token string">&#x27;0&#x27;</span> <span class="token operator">?</span> <span class="token constant">C</span> <span class="token keyword">extends</span> <span class="token string">&#x27;1&#x27;</span> <span class="token operator">?</span> Add<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token constant">A</span> <span class="token operator">:</span>
<span style="user-select:none" class="line-numbers-rows">06</span>    <span class="token comment">// @ts-ignore 这块递归比较多 TS 会有警告, 故加了个 ts-ignore</span>
<span style="user-select:none" class="line-numbers-rows">07</span>    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Add<span class="token operator">&lt;</span> HeadOf<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> HeadOf<span class="token operator">&lt;</span><span class="token constant">B</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> HeadOf<span class="token operator">&lt;</span>IncX<span class="token operator">&lt;</span>Tail<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> Tail<span class="token operator">&lt;</span><span class="token constant">B</span><span class="token operator">&gt;&gt;&gt;</span> <span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Tail<span class="token operator">&lt;</span> IncX<span class="token operator">&lt;</span>IncX<span class="token operator">&lt;</span>Tail<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> Tail<span class="token operator">&lt;</span><span class="token constant">B</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token operator">&gt;</span> <span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span style="user-select:none" class="line-numbers-rows">08</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC"><div class="std-img"><img class="std-img-bg r-link" data-minimap="Rect" src="/images/typescript-tamplate-type/1599542552_48_w868_h530.png" alt="enter image description here"/><div class="std-img-text">enter image description here</div></div></div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">完整实现见 <a target="_blank" href="https://www.typescriptlang.org/play?ts=4.1.0-pr-40336-88#code/PTAEnnjQH+MKjlFl5QHUwLACgAuBPADgU1AOQFcBbAI2wCcBLAY1AF5QByABkdAB8mBGNzxgJl5MAzEMYAWMQFYxANjEB2MQA4xATkYBuFChChAWdqBJOVDNQAP1BdloQFeBgPI1AI5GBMJV1hAQZqgAkgDtqAeW9sAB5GDQAabkYAPno6OhjGLlYUDBwvXwDggEFQbAAPVGxvABMAZ1BS1CpvAHMYhgAKFFAW0Bz8wpLyljYAfkiWgC5WvVMAakt6S2bW9oKisoH+gTZQYZa9LlAJrYZ+GZa5zsWV0GXRIZGwfm3JhmEDttz5rpE+pklLjbBhW93QcSPI4LbqfZYyL6gPTiP5TKRA57HboQ5bySF6KSwhiyBEdEFMNHLJTosCyLGgBS4l4nYnLVQkink5RUpFMenLDQM6w7KZqFn40LvRKsNZXUBqclJfmvYVCrg8UVQsASnkMKXIVpPPEy+VywSKvQqu6WZjSk5cfXLLgXdaGyWmjWzREC61yz625X2s3dLhg7gQj3ir2Ow7OnUo7howNG-7qzXAnWE7jE6PB+Nh8207j01Oqk3e7Nyzm541x1qBABuFBQAEptMhXKBAIyu6X8gQMxlMFglgGBgwAvaoBQxUAIW6Ab7lAPCGgAKlQCrNqAANrMCJqAC6t3ni6XjY8PmoAA0QuEmBp6nEElZGCksLht3uE4tKtUahEAEIZ8r3yi1eqgJoh0Av7UnCK-Q5AaYDjKWjz-tSPrvNeQTbpkQRZFEEQ9DEoGTHm+y-lBrKnP0cEIYESEoZE6GBjceYPDhr5vGcrZ7kR2SkSs5HfKAvx5oCNEAaCsG+IxGTEchqGiGxSoAuS8I8dBTARoRQnMahkjiRi5I4jJeFJgpbZKXJ0RfHoZJ5pSmkClmOmISJBIGRhChMpBtGMOyDHwYpJGoUoqlgNyxp8mZMqcgRAlubpHlsrZJaxg68a1vWjaAGvKgAsmoAFwmNgAEtgACGxR+AAZiEFrCCpsSnvwogXmkmU5flQQAMq0e+n5TA1vGgAABgAJAA3h+eUUH+2B5QA9uQ2AAL49YQpAUDQ43tfRT5DaNuDDJWFDxcgegJYAfDppVtYAACpZZQAA2hXlSVcTxB855oJeoDHWd9WNVUH51FMP6aq1sldd101kFQ1CTb13j9eQoAAErYJU82PJq-TQ5UtHtQt-QNcMT3nUjqBRPDrRrdgVbkHFOgHaA07DDkL6AFxyE7wBEADCoCAPRmgDb8bAESABt5gAl0TTJiVbgWTFMUSGvQ+z7i+9TNS7UUxoZ9BaMKs-TM21iTvMLotPkzMTDC+gyOerKugGrska-RWtIbroo5Ibv63t0QGm05CrASLQQ66bet-msRvm87Zt4W7bQe1kNtU37v56AAAqgpQALSUDU3graAgCb8YA6uqAEgJgBK+oAK9aAMHxgBYmo9DWAFjygCQ5oAZtGAFIqESAKKmE6AGFy0CgPHScpytjx-VboDVblBXWQPtVPqRI8FXBWPhdPY9RDEUQg9PrlTyd53WbP8824v7Wkw25OANK2gCr0YAFK6ANHygvtzDqBa-8Vsa6hPBRJomoSSsl+FJUWs3Aw9-yMp0QX6aj0LKD+18ta-F-h7RIohUL8HkM-MUjBhAaDAV-EWMIoGi0SJIOBCCgFv3EMkfeqRcCfxviLTEWCQgoMYI-QBwCwASGIaQq+6DihkmoaENQPCDwa0QSApIzBhEsIeuQrW9kuG8J4XQpgggBFMKEcIngaCKHFGsFwngqFpFHhfoIkRwi7qqK1hKTRsiH5kSASAiq900jiJFkkKY99WDaPMU-PRijiEoCAA" style="background-color:#deede0" class="std-link --fontSansSerif  _line" data-minimap-color="#deede0"><span class="std-link-icon r-link" data-src="/get-favicon/www.typescriptlang.org?h=69644489241" style="background-image:url(&quot;/get-favicon/www.typescriptlang.org?h=69644489241&quot;)"></span><span class="std-link-txt">Eczn’s TypeScript Playground :: Type Parser For Addition Transform</span></a></div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">乘法的计算可以利用加法递归定义；求余其实就是 Tail 取模其实是 HeadOf … 总之其他的运算都还算可以做。</div>
<h1 id="实现-url-parser" class="std-title --fontTitle"><a target="_blank" href="#实现-url-parser" class="markdownIt-Anchor">#</a> 实现 URL Parser<i data-minimap="Ignore"> ↵ </i></h1>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">根据 URL 的定义可以很快写出:</div>
<div class="std-code"><pre class="prismjs ts rally-runner  "><span style="user-select:none" class="line-numbers-rows">00</span><span class="token keyword">type</span> <span class="token class-name">MakeUrl<span class="token operator">&lt;</span>Protocol<span class="token punctuation">,</span> Domain<span class="token punctuation">,</span> Port<span class="token punctuation">,</span> Pathname<span class="token punctuation">,</span> Search<span class="token punctuation">,</span> Hash<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
<span style="user-select:none" class="line-numbers-rows">01</span>    protocol<span class="token operator">:</span> Protocol<span class="token punctuation">,</span>
<span style="user-select:none" class="line-numbers-rows">02</span>    domain<span class="token operator">:</span> Domain<span class="token punctuation">,</span>
<span style="user-select:none" class="line-numbers-rows">03</span>    port<span class="token operator">:</span> Port<span class="token punctuation">,</span>
<span style="user-select:none" class="line-numbers-rows">04</span>    pathname<span class="token operator">:</span> Pathname<span class="token punctuation">,</span>
<span style="user-select:none" class="line-numbers-rows">05</span>    search<span class="token operator">:</span> Search<span class="token punctuation">,</span>
<span style="user-select:none" class="line-numbers-rows">06</span>    hash<span class="token operator">:</span> Hash
<span style="user-select:none" class="line-numbers-rows">07</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">08</span>
<span style="user-select:none" class="line-numbers-rows">09</span><span class="token keyword">type</span> <span class="token class-name">URLParse<span class="token operator">&lt;</span><span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>
<span style="user-select:none" class="line-numbers-rows">10</span>    <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Protocol<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">://</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Domain<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Pathname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token string">&#x27;AA&#x27;</span> <span class="token operator">:</span> <span class="token string">&#x27;BB&#x27;</span>
<span style="user-select:none" class="line-numbers-rows">11</span>    <span class="token comment">// 这里停顿一下... Port 是可省略的 ... 这里又必填了</span>
<span style="user-select:none" class="line-numbers-rows">12</span><span class="token punctuation">)</span></pre></div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">写到这里发现 URL 里有些字段是可以不用填的，因此上面的做法很局限，不好搞全全部情况。</div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">斟酌之后考虑用 KVPair 的结构来解析：</div>
<div class="std-code"><pre class="prismjs ts rally-runner  "><span style="user-select:none" class="line-numbers-rows">00</span><span class="token comment">// 解析 URL 为对象类型</span>
<span style="user-select:none" class="line-numbers-rows">01</span><span class="token keyword">type</span> <span class="token class-name">URLParse<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> KVPairsToObj<span class="token operator">&lt;</span>URLKVPairs<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">02</span>
<span style="user-select:none" class="line-numbers-rows">03</span><span class="token comment">// 解析 URL 为 KVPairs</span>
<span style="user-select:none" class="line-numbers-rows">04</span><span class="token keyword">type</span> <span class="token class-name">URLKVPairs<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>
<span style="user-select:none" class="line-numbers-rows">05</span>    <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Protocol<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">://</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Rest<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token string">&#x27;protocol&#x27;</span><span class="token punctuation">,</span> Protocol<span class="token punctuation">,</span> ParseDomain<span class="token operator">&lt;</span>Rest<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token operator">:</span>
<span style="user-select:none" class="line-numbers-rows">06</span>    <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">//</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Rest<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token string">&#x27;protocol&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> ParseDomain<span class="token operator">&lt;</span>Rest<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token operator">:</span>
<span style="user-select:none" class="line-numbers-rows">07</span>    <span class="token builtin">never</span>
<span style="user-select:none" class="line-numbers-rows">08</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">09</span>
<span style="user-select:none" class="line-numbers-rows">10</span><span class="token comment">// 解析 Domain</span>
<span style="user-select:none" class="line-numbers-rows">11</span><span class="token keyword">type</span> <span class="token class-name">ParseDomain<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>
<span style="user-select:none" class="line-numbers-rows">12</span>    <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Domain<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Rest<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token string">&#x27;domain&#x27;</span><span class="token punctuation">,</span> Domain<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#x27;port&#x27;</span><span class="token punctuation">,</span> Port<span class="token punctuation">,</span> ParsePathname<span class="token operator">&lt;</span>Rest<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">:</span>
<span style="user-select:none" class="line-numbers-rows">13</span>    <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Domain<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token string">&#x27;domain&#x27;</span><span class="token punctuation">,</span> Domain<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#x27;port&#x27;</span><span class="token punctuation">,</span> Port<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">:</span>
<span style="user-select:none" class="line-numbers-rows">14</span>    <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Domain<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Rest<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token string">&#x27;domain&#x27;</span><span class="token punctuation">,</span> Domain<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#x27;port&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> ParsePathname<span class="token operator">&lt;</span>Rest<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">:</span>
<span style="user-select:none" class="line-numbers-rows">15</span>    <span class="token punctuation">[</span><span class="token string">&#x27;domain&#x27;</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">]</span>
<span style="user-select:none" class="line-numbers-rows">16</span><span class="token punctuation">)</span>
<span style="user-select:none" class="line-numbers-rows">17</span>
<span style="user-select:none" class="line-numbers-rows">18</span><span class="token comment">// 解析 Pathname</span>
<span style="user-select:none" class="line-numbers-rows">19</span><span class="token keyword">type</span> <span class="token class-name">ParsePathname<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>
<span style="user-select:none" class="line-numbers-rows">20</span>    <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Pathname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Search<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">#</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Hash<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token string">&#x27;pathname&#x27;</span><span class="token punctuation">,</span> Pathname<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#x27;search&#x27;</span><span class="token punctuation">,</span> Search<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#x27;hash&#x27;</span><span class="token punctuation">,</span> Hash<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">:</span>
<span style="user-select:none" class="line-numbers-rows">21</span>    <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Pathname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Search<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token string">&#x27;pathname&#x27;</span><span class="token punctuation">,</span> Pathname<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#x27;search&#x27;</span><span class="token punctuation">,</span> Search<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">:</span>
<span style="user-select:none" class="line-numbers-rows">22</span>    <span class="token punctuation">[</span><span class="token string">&#x27;pathname&#x27;</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">]</span>
<span style="user-select:none" class="line-numbers-rows">23</span><span class="token punctuation">)</span></pre></div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">总之我的思路就是想办法得到 KVPair 最后 pair 转 obj</div>
<div class="std-code"><pre class="prismjs bash rally-runner  "><span style="user-select:none" class="line-numbers-rows">00</span>https://eczn.local/a.html?aaa<span class="token operator">=</span>bbb<span class="token comment">#hash</span>
<span style="user-select:none" class="line-numbers-rows">01</span><span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token string">&#x27;protocol&#x27;</span>, <span class="token string">&#x27;https&#x27;</span>, ParseDoamin<span class="token operator">&lt;</span><span class="token string">&#x27;eczn.local/a.html?aaa=bbb#hash&#x27;</span><span class="token operator">&gt;</span><span class="token punctuation">]</span>
<span style="user-select:none" class="line-numbers-rows">02</span>
<span style="user-select:none" class="line-numbers-rows">03</span>ParseDoamin<span class="token operator">&lt;</span><span class="token string">&#x27;eczn.local/a.html?aaa=bbb#hash&#x27;</span><span class="token operator">&gt;</span>
<span style="user-select:none" class="line-numbers-rows">04</span><span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token string">&#x27;domain&#x27;</span>, <span class="token string">&#x27;eczn.local&#x27;</span>, <span class="token punctuation">[</span><span class="token string">&#x27;port&#x27;</span>, null, ParsePathname<span class="token operator">&lt;</span><span class="token string">&#x27;a.html?aaa=bbb#hash&#x27;</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span style="user-select:none" class="line-numbers-rows">05</span>
<span style="user-select:none" class="line-numbers-rows">06</span>ParsePathname<span class="token operator">&lt;</span><span class="token string">&#x27;a.html?aaa=bbb#hash&#x27;</span><span class="token operator">&gt;</span> <span class="token operator">=</span><span class="token operator">&gt;</span>
<span style="user-select:none" class="line-numbers-rows">07</span><span class="token punctuation">[</span><span class="token string">&#x27;pathanme&#x27;</span>, <span class="token string">&#x27;a.html&#x27;</span>, <span class="token punctuation">[</span><span class="token string">&#x27;search&#x27;</span>, <span class="token string">&#x27;aaa=bbb&#x27;</span>, <span class="token punctuation">[</span><span class="token string">&#x27;hash&#x27;</span>, <span class="token string">&#x27;hash&#x27;</span>, null<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span style="user-select:none" class="line-numbers-rows">08</span>
<span style="user-select:none" class="line-numbers-rows">09</span>最后是一个 <span class="token punctuation">[</span>K, V, <span class="token punctuation">[</span>K2, V2, <span class="token punctuation">[</span>K3, V3, null<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span> 的递归结构，将其转为 obj 即可（前面 JSON Parser 已经实现了<span class="token punctuation">)</span></pre></div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">完整实现详见: <a target="_blank" href="https://www.typescriptlang.org/play?ts=4.1.0-pr-40336-88#code/LAKALgngDgpgBAaQGoAUCGBLATgZwCoD2A8gEYBWAPCgHxwC8cKcMAHmDAHYAmOcA2hg4AzGFkQAaOIJFikk6aLgAlGDjABdOAH44AClBxDiZm0489arIIDmcAD5wOAVwC2JRQ5wQ3BADYBKbT0DI1CVNRN2bl5nX18Q0MSggG9+AEkAOQyAUSUEbIBNKQ5EdQAuOCRIs14+SxtJeo5rSTQOCE0dZHRsfGJyCiRaCqqAXwSkowrUvkycvMLi4wcAaxgIAiFEVExcQlJKcLBqcrg53Pyi1ijzBCDdKuua-iaWuFfW9s7tnr3+yiGcBGgQq3V2fQOFCO1FmWQuhU04xAoRBjhgADdRKBURwMaIANygUAAemJcEAx5GABPM4ABVJQAGTggC45QCf2oBDGMA3j6AaPVQJBYLSGehcDAKDTaAwwb19gM6fTJbhRdRqISQCSyVSBYymT9wbzoPBZfKcIr6MFkUYadVonAAAYAEmSCjEKCwBDABAAxn5RmVSQ6ncpVGBRjagnwAORQV3ur2+cOSF1uz1+BNoYUAEQILkwHChQZOQImlqe1ptfsdwkURxDYcj0eTccksV8qYzWZzebUBbKE1xmKw2JVaop1Mz2cEev5QpwMDHHbFpv05sMxdMpf9lbEc8EPo3MkYBCwweJe6rQZrOgjXHbgnjcG3HEkEagh7Ad5Qr9bM-QYAAFhw0BcEVoXUTQe2XWkrXMe0K33B9d1gxQPyPC9+HDa9xw4O8HyfSNX3fT9HCcOJQMLCDVxuXgYIDeCT0QsRq1DS90JvLDJBwtCXyPO9my-GAf3-QDgPzUjwNCK9WLvGkm2I3x1GxIkQFJEdGDQP8AKAyd4Gnfi1MEoCTQYJdQgo55qM3VT1KE0YtFPMQAGUYDTD1f1GABiOy4AACTQHBXKYzi9I0mB3yCoTcJnZzfzvRyotw39fOiyQfL8mSSNEosoKozyBOCmzPNirAXNQ58wqA0KrKAiKnKKpK4EKly0rksCJlKyqQskaSiJIhTVSUslAGlbQBV6MACldAGj5LS4CcLBfAARlNWUdIocNfzAMAoBwX1iRgD0AC8OAAOl8T00F8Yk0GJEhiQ9A7VpcXwtCcQQ6FmgBOd7XoAMhIEg6BIdFTqcGA3LIJw1AAWgSvzIdEELlUm6bfAAJgWwU0xnZbVvWzbSR2-ajpOs7Huet6Pu+37-sB4HQYhqHfxhrA4aHcB9SmmaAGZUfpJaVrWjatrxw7jo9U7w3hln+URgAWLmedxvahcJsXmb5eBEYAVll9GRV57GBYVgmRbOtBbrAe7lYRmaADYteFTG+Zx7aDeF07iS0NAPc9tA-p+n6LZAIA" style="background-color:#f0ebdc" class="std-link --fontSansSerif  _line" data-minimap-color="#f0ebdc"><span class="std-link-icon r-link" data-src="/get-favicon/www.typescriptlang.org?h=-40801761362" style="background-image:url(&quot;/get-favicon/www.typescriptlang.org?h=-40801761362&quot;)"></span><span class="std-link-txt">Eczn’s TypeScript Playground :: Type Parser For URL</span></a></div>
<h1 id="实现-querystring-parser" class="std-title --fontTitle"><a target="_blank" href="#实现-querystring-parser" class="markdownIt-Anchor">#</a> 实现 QueryString Parser<i data-minimap="Ignore"> ↵ </i></h1>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">上面 URL Parser 并没有帮忙 parse querystring，这里也补一个, 道理也是类似的，从字符串生成 KVP 再转 object</div>
<div class="std-code"><pre class="prismjs ts rally-runner  "><span style="user-select:none" class="line-numbers-rows">00</span><span class="token comment">// Query 字符串转 KVP 结构</span>
<span style="user-select:none" class="line-numbers-rows">01</span><span class="token keyword">type</span> <span class="token class-name">QueryParseToKVP<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>
<span style="user-select:none" class="line-numbers-rows">02</span>    <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Rest<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span style="user-select:none" class="line-numbers-rows">03</span>        <span class="token operator">?</span> <span class="token punctuation">[</span>Key<span class="token punctuation">,</span> Value<span class="token punctuation">,</span> QueryParseToKVP<span class="token operator">&lt;</span>Rest<span class="token operator">&gt;</span><span class="token punctuation">]</span>            <span class="token comment">// 这种情况直接解析</span>
<span style="user-select:none" class="line-numbers-rows">04</span>        <span class="token operator">:</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Key2<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Value2<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span style="user-select:none" class="line-numbers-rows">05</span>            <span class="token operator">?</span> <span class="token punctuation">[</span>Key2<span class="token punctuation">,</span> Value2<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">]</span>                  <span class="token comment">// 这种情况代表到最后一项了</span>
<span style="user-select:none" class="line-numbers-rows">06</span>            <span class="token operator">:</span> <span class="token keyword">null</span>                                  <span class="token comment">// 否则返回 null</span>
<span style="user-select:none" class="line-numbers-rows">07</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC"><a target="_blank" href="https://www.typescriptlang.org/play?ts=4.1.0-pr-40336-88#code/PTAEhIlRa01A1VHozQsHL1AaRgBVIZb9Ah5oGH-5AQt0F3owClc1MBDASwCcBnAFQHsB5AIwCtRAQTUDAXfIDIVQJhKgFfjAe2qA3RUBXgYGq4gLAAoAC4BPAA4BTUAFkqajlvQYAPDAB8oALyxQWgB4qtAOwAmDUAG0GKujRcAcwAaUF9-INCqFzUAXVAAfkoMWkZWTi5zKwAuWABuZWUQUEAwHUAkBMAlfSJkqn9PQGjlQGc9UAA6NuV1bRr6ZnZuUwwrWyxHZ3dPLwCAMy06NFDp2dgFlxm5gCUtX3ikgAplUEPQYsAJRUA7D0Bd+TRQQHvlQFO5QB15QC45NC01VrbQUUBEI0AbuUlQFgZIBH3QOR1Q9icrg8oF24QCgVAAB9QC4AK4AWyMcxRDDUWJYABsAJSJWFgo5HTa+SFjGHowmEimUlnFQBBmoAc80AL9GgakqBCotGMj4tUAiLmAODNKoAGJUAqXqAMLlQoAXt0ApcYAgDe3lQsVycAAvqBAM7KN1CgDF5OyAfTlAJDmN0AvwEoEygQAHaoATa0AgZF6AxGExZUCVQAAcoBoOWZLKOSU1XgAkgA5aMAUXWqDjAE1QAE0DrPYZjJhfXqQ6HjmBOTy+aArYAcOUA-pHiiV-QAA6W7KoBt+P9gFNrAQF0PFQAXNoB4Q1AMfjiZToCIgDXlQA8Ck9AMr6gFklaoQu6AKeVQABrN4sKbdNJ9TJ8iyhYiNwAU6pVADOJgCN0sjSypEbAcrussCANkdAHAqUEHsYTSdTSAdoCcsQJAAvo2Y+pYT6UsUogAiYqS9BkpgHlG34jsmsRQUcuQRkOP6jumEIohuahbjuiH9AemZ4ehtLQp4EJJGB3q5pYoC5PBPTpJRWwqBYqHDr+8T5kolKkrkLhaAAbrMyjiai0mzAUShFGAACKaKzO8gDq2oAZN6AExygA28ckOC4B0mg6BpWkpIwWisD6ADKdHjGEfgIkM5KiUcTmjPRoAAAYACTqoscyoG8erWMFoWwFQhKaXqABk0WrEsfJ6v5T5JF44VqKEMBxZpoRWXQag2QwdksD6VGFs+oCAJvxgCznoAowaAK2KqqAMeRgAJ5k+uQ+VCLlBSFqVhW8ABMkUpWssXxVoE2ZV5tWHNluVjflhVzaEDKEvES21cUTVtYAx3KABYR0qAADmb7+oAnhnylhhwSUKhJ7S9r1Fl84gSIKjJycpqmgJqVC5AA5AAjMDoAiZ0OgAPowwAjlQNjkdxmSgCVZW1BV9m5sDVDWODVgWH9SjFIDIPg6EHAg2NENQxZoBw4jHDI5xu5IejmmleVlU+njBOJRw1i00TJNk6AQOgGDwNUzTMugAAxiDADM8tuCDAAsdPmV0TNUBwCtuKz1BcXupic9ZWO87j+Og4LwuJQr1jK4lbjWFrovKEAA" style="background-color:#f7f3e9" class="std-link --fontSansSerif  _line" data-minimap-color="#f7f3e9"><span class="std-link-icon r-link" data-src="/get-favicon/www.typescriptlang.org?h=326486758" style="background-image:url(&quot;/get-favicon/www.typescriptlang.org?h=326486758&quot;)"></span><span class="std-link-txt">Eczn’s TypeScript Playground :: Type Parser For QueryString</span></a></div>
<h1 id="实现-uuid-type-check" class="std-title --fontTitle"><a target="_blank" href="#实现-uuid-type-check" class="markdownIt-Anchor">#</a> 实现 UUID Type Check<i data-minimap="Ignore"> ↵ </i></h1>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">校验某字符串是否满足 uuid 的规则:</div>
<div class="std-code"><pre class="prismjs ts rally-runner  "><span style="user-select:none" class="line-numbers-rows">00</span><span class="token keyword">type</span> <span class="token class-name">StrHex</span> <span class="token operator">=</span> <span class="token string">&#x27;1&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;2&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;3&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;4&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;5&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;6&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;7&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;8&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;9&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;0&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;A&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;B&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;C&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;D&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;E&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;F&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;a&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;b&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;c&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;d&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;e&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;f&#x27;</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">01</span>
<span style="user-select:none" class="line-numbers-rows">02</span><span class="token comment">// 返回长度, 如 StrHexCons&lt;&#x27;1234&#x27;&gt; ===&gt; &#x27;4&#x27;</span>
<span style="user-select:none" class="line-numbers-rows">03</span><span class="token keyword">type</span> <span class="token class-name">StrHexCons<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token constant">ACC</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> AddOneMap <span class="token operator">=</span> <span class="token string">&#x27;0&#x27;</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>
<span style="user-select:none" class="line-numbers-rows">04</span>    <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>StrHex<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Rest<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span style="user-select:none" class="line-numbers-rows">05</span>        <span class="token operator">?</span> StrHexCons<span class="token operator">&lt;</span>Rest<span class="token punctuation">,</span> AddOneMap<span class="token punctuation">[</span><span class="token constant">ACC</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
<span style="user-select:none" class="line-numbers-rows">06</span>        <span class="token operator">:</span> <span class="token constant">ACC</span>
<span style="user-select:none" class="line-numbers-rows">07</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">08</span>
<span style="user-select:none" class="line-numbers-rows">09</span><span class="token keyword">type</span> <span class="token class-name">AddOneMap</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
<span style="user-select:none" class="line-numbers-rows">10</span>    <span class="token string-property property">&#x27;0&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;1&#x27;</span><span class="token punctuation">,</span>
<span style="user-select:none" class="line-numbers-rows">11</span>    <span class="token string-property property">&#x27;1&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;2&#x27;</span><span class="token punctuation">,</span>
<span style="user-select:none" class="line-numbers-rows">12</span>    <span class="token string-property property">&#x27;2&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;3&#x27;</span><span class="token punctuation">,</span>
<span style="user-select:none" class="line-numbers-rows">13</span>    <span class="token string-property property">&#x27;3&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;4&#x27;</span><span class="token punctuation">,</span>
<span style="user-select:none" class="line-numbers-rows">14</span>    <span class="token string-property property">&#x27;4&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;5&#x27;</span><span class="token punctuation">,</span>
<span style="user-select:none" class="line-numbers-rows">15</span>    <span class="token string-property property">&#x27;5&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;6&#x27;</span><span class="token punctuation">,</span>
<span style="user-select:none" class="line-numbers-rows">16</span>    <span class="token string-property property">&#x27;6&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;7&#x27;</span><span class="token punctuation">,</span>
<span style="user-select:none" class="line-numbers-rows">17</span>    <span class="token string-property property">&#x27;7&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;8&#x27;</span><span class="token punctuation">,</span>
<span style="user-select:none" class="line-numbers-rows">18</span>    <span class="token string-property property">&#x27;8&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;9&#x27;</span><span class="token punctuation">,</span>
<span style="user-select:none" class="line-numbers-rows">19</span>    <span class="token string-property property">&#x27;9&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;10&#x27;</span><span class="token punctuation">,</span>
<span style="user-select:none" class="line-numbers-rows">20</span>    <span class="token string-property property">&#x27;10&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;11&#x27;</span>
<span style="user-select:none" class="line-numbers-rows">21</span>    <span class="token string-property property">&#x27;11&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;12&#x27;</span>
<span style="user-select:none" class="line-numbers-rows">22</span>    <span class="token string-property property">&#x27;12&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;13&#x27;</span><span class="token punctuation">,</span>
<span style="user-select:none" class="line-numbers-rows">23</span>    <span class="token string-property property">&#x27;13&#x27;</span><span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">,</span> <span class="token comment">// 12 对应 13 ... 会导致 AddOneMap[keyof AddOneMap] 出现问题</span>
<span style="user-select:none" class="line-numbers-rows">24</span><span class="token punctuation">}</span>
<span style="user-select:none" class="line-numbers-rows">25</span>
<span style="user-select:none" class="line-numbers-rows">26</span><span class="token keyword">type</span> <span class="token class-name">IsUUID<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>
<span style="user-select:none" class="line-numbers-rows">27</span>    <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> One<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Two<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Three<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Four<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span style="user-select:none" class="line-numbers-rows">28</span>        <span class="token operator">?</span> <span class="token punctuation">(</span>
<span style="user-select:none" class="line-numbers-rows">29</span>            <span class="token string">&#x27;8&#x27;</span> <span class="token keyword">extends</span> <span class="token class-name">StrHexCons<span class="token operator">&lt;</span>One<span class="token operator">&gt;</span></span> <span class="token operator">?</span>
<span style="user-select:none" class="line-numbers-rows">30</span>                <span class="token string">&#x27;4&#x27;</span> <span class="token keyword">extends</span> <span class="token class-name">StrHexCons<span class="token operator">&lt;</span>Two<span class="token operator">&gt;</span></span> <span class="token operator">?</span>
<span style="user-select:none" class="line-numbers-rows">31</span>                    <span class="token string">&#x27;4&#x27;</span> <span class="token keyword">extends</span> <span class="token class-name">StrHexCons<span class="token operator">&lt;</span>Three<span class="token operator">&gt;</span></span> <span class="token operator">?</span>
<span style="user-select:none" class="line-numbers-rows">32</span>                        <span class="token string">&#x27;12&#x27;</span> <span class="token keyword">extends</span> <span class="token class-name">StrHexCons<span class="token operator">&lt;</span>Four<span class="token operator">&gt;</span></span> <span class="token operator">?</span>
<span style="user-select:none" class="line-numbers-rows">33</span>                            <span class="token boolean">true</span>
<span style="user-select:none" class="line-numbers-rows">34</span>                        <span class="token operator">:</span> <span class="token boolean">false</span>
<span style="user-select:none" class="line-numbers-rows">35</span>                    <span class="token operator">:</span> <span class="token boolean">false</span>
<span style="user-select:none" class="line-numbers-rows">36</span>                <span class="token operator">:</span> <span class="token boolean">false</span>
<span style="user-select:none" class="line-numbers-rows">37</span>            <span class="token operator">:</span> <span class="token boolean">false</span>
<span style="user-select:none" class="line-numbers-rows">38</span>        <span class="token punctuation">)</span>
<span style="user-select:none" class="line-numbers-rows">39</span>        <span class="token operator">:</span> <span class="token boolean">false</span>
<span style="user-select:none" class="line-numbers-rows">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">41</span>
<span style="user-select:none" class="line-numbers-rows">42</span><span class="token keyword">type</span> <span class="token class-name">__a</span> <span class="token operator">=</span> IsUUID<span class="token operator">&lt;</span><span class="token string">&#x27;12345678-1234-1234-15123456789ABC&#x27;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span style="user-select:none" class="line-numbers-rows">43</span><span class="token keyword">type</span> <span class="token class-name">__b</span> <span class="token operator">=</span> IsUUID<span class="token operator">&lt;</span><span class="token string">&#x27;12345678-1234-1234-123456789ABC&#x27;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span style="user-select:none" class="line-numbers-rows">44</span><span class="token keyword">type</span> <span class="token class-name">__c</span> <span class="token operator">=</span> IsUUID<span class="token operator">&lt;</span><span class="token string">&#x27;123456**-1234-1234-123456789ABC&#x27;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span style="user-select:none" class="line-numbers-rows">45</span><span class="token keyword">type</span> <span class="token class-name">__d</span> <span class="token operator">=</span> IsUUID<span class="token operator">&lt;</span><span class="token string">&#x27;12345678-1&amp;24-1234-123456789ABC&#x27;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// false</span></pre></div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC"><a target="_blank" href="https://www.typescriptlang.org/play?ts=4.1.0-pr-40336-88#code/C4TwDgpgBAysBOAJCAPKBeKByAjFqAPtgEz5FYDMZ2ALNVgKz0Bs9A7PQBz0Cc9ADPQCC9AEL0AwvQAi9AKL0AYvQCG9AEb0AxvQAm9CPQBmWANwBYAFBWA9DaiAV+MB7aoH9UwGV6AGiiAgzVgJkKBIA9gB2AM4APLjEFHQAfBjo6AlYdFagkH5IqMHhETBQqMAQIbphUGEIAJYhAOZeQhIShSjFpeUA1hAgQUZQQrq6APIhEACyKmAY2IIJmAAUVlDLsC1tZVAABgAkAN5w2SgAvns1RhDwUABKEJVHm0srTwD8WQG5kTeVDYMj45MAbUaEgAunFHk9lgAufpNKwASgs1ksGWgA2GowmU0wuwhMywMNwWA8eKJhNIJMsTywpEJVEp1KohLoDJWqQJ2CYrOWjA5WFY3OwrEJHEFWA4hO4Yu4hL4Yr4hJwgjFSr5ODwpPVatImtp2Bw9M1TKgowAbhcvHYoDhiFBAJ-agBS9a0UKAAOndUEAWPKAH+1AC+B-V+mMBXR6fXRfyxIKggC-FQANzoA71MAGRlWI5WdLgaAASTCAFUc5npPk1iUNpV4DVanMoIsqSsCkUS+UdrszhcoH8jgBaU4hc6XAAqAHcgl2e32oP2ABbwCAQUct3ttxRBACu8HueJe1c3kJ53GL7TeOVCkT+CWeO931LoB42B3eJ4iQ6C58vV937Nv5Xvx7yU5nECvrW74gZC0T4A2h4-oEj7LmuQGgYhV4ICuEBvkhTwwkYKgADZhGhwEYZhUDYXhBFEdCJG4fh6ErFh1HkVe8JvvRZEIki6aZAA+lxKjTNmeYFlENqxAwzBsJwnYiTQUkxDJOAMNJYkSTwQiiFIcSmFAVqkTRKIZlAPHqPxub5oW0SieJknSbJsS2TQymcKp6lYJp2n2ChBGooZXFaCZgnmUpzAAFTBfZ4VBSpakaVpOkMZx0A8bo-lmcJcmOVJABkxDyXJ9mOc5MXuVRbGWEAA" style="background-color:#f6ebf6" class="std-link --fontSansSerif  _line" data-minimap-color="#f6ebf6"><span class="std-link-icon r-link" data-src="/get-favicon/www.typescriptlang.org?h=39424198110" style="background-image:url(&quot;/get-favicon/www.typescriptlang.org?h=39424198110&quot;)"></span><span class="std-link-txt">Eczn’s TypeScript Playground :: Type Check For UUID String</span></a></div>
<h1 id="template-type-小结" class="std-title --fontTitle"><a target="_blank" href="#template-type-小结" class="markdownIt-Anchor">#</a> Template Type 小结<i data-minimap="Ignore"> ↵ </i></h1>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">私以为的 Template Type 的几个关键点 :</div>
<ol class="std-list">
<li>静态的 Template Pattern 产生了变化的 string 字面量</li>
<li>利用 KVP 结构来做 Parser / 遍历事半功倍</li>
<li>类型系统完全可以当成单独的语言系统来看待, 可以被形式化验证</li>
</ol>
</div></article></div><hr class="std-hr"/><hr class="std-hr"/><div class="blog-footer-main"><a class="r-link _prev" href="/cate/all/"><span class="_icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="caret-left" class="svg-inline--fa fa-caret-left fa-w-6 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 512"><path fill="currentColor" d="M192 127.338v257.324c0 17.818-21.543 26.741-34.142 14.142L29.196 270.142c-7.81-7.81-7.81-20.474 0-28.284l128.662-128.662c12.599-12.6 34.142-3.676 34.142 14.142z"></path></svg></span><span>回到列表</span></a><div class="_current"><span class="_smaller _grey">第</span><span class="_nums _grey">1</span><span class="_smaller _grey">篇</span><div class="_now-id">如何利用 Template Type 来做 Parser</div></div><a class="r-link _next" href="/cate/all/"><span>回到列表</span><span class="_icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="caret-right" class="svg-inline--fa fa-caret-right fa-w-6 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 512"><path fill="currentColor" d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"></path></svg></span></a></div><hr class="std-hr"/><hr class="std-hr"/><div class="back-to-top-main"><span class="_icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="caret-up" class="svg-inline--fa fa-caret-up fa-w-10 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M288.662 352H31.338c-17.818 0-26.741-21.543-14.142-34.142l128.662-128.662c7.81-7.81 20.474-7.81 28.284 0l128.662 128.662c12.6 12.599 3.676 34.142-14.142 34.142z"></path></svg></span><span class="_icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="caret-up" class="svg-inline--fa fa-caret-up fa-w-10 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M288.662 352H31.338c-17.818 0-26.741-21.543-14.142-34.142l128.662-128.662c7.81-7.81 20.474-7.81 28.284 0l128.662 128.662c12.6 12.599 3.676 34.142-14.142 34.142z"></path></svg></span><span class="_icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="caret-up" class="svg-inline--fa fa-caret-up fa-w-10 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M288.662 352H31.338c-17.818 0-26.741-21.543-14.142-34.142l128.662-128.662c7.81-7.81 20.474-7.81 28.284 0l128.662 128.662c12.6 12.599 3.676 34.142-14.142 34.142z"></path></svg></span><div class="_text-intro">回到顶部</div></div><hr class="std-hr"/><hr class="std-hr"/></div></div></div>
<script>window.__INITIAL_STATE__ = {"CategoryApiState":{"loaded":true,"loading":false,"error":null,"dataMap":{"/TypeScript/6807abf36fcb16f0fd8272b415d91c0c":{"type":"detail","categoryId":"TypeScript","list":[{"title":"如何利用 Template Type 来做 Parser","intro":"如何利用 Template Type 来做 Parser","date":"2020-10-01 16:51:45","category":"TypeScript","cateIntro":"TypeScript 相关","tags":["TypeScript","TemplateType","Parser"],"type":"article","id":"6807abf36fcb16f0fd8272b415d91c0c","appTitle":"","appIcon":"","author":"eczn","imgs":[],"time":"2020-10-01T08:51:45.000Z","isDraft":false,"fileDeps":["/images/typescript-tamplate-type/1599490540_32_w2294_h144.png","/images/typescript-tamplate-type/1599490559_10_w820_h538.png","/images/typescript-tamplate-type/1599542552_48_w868_h530.png"],"wordCount":22567}],"current":{"type":"markdown","meta":{"title":"如何利用 Template Type 来做 Parser","intro":"如何利用 Template Type 来做 Parser","date":"2020-10-01 16:51:45","category":"TypeScript","cateIntro":"TypeScript 相关","tags":["TypeScript","TemplateType","Parser"],"type":"article","id":"6807abf36fcb16f0fd8272b415d91c0c","appTitle":"","appIcon":"","author":"eczn","imgs":[],"time":"2020-10-01T08:51:45.000Z","isDraft":false,"fileDeps":["/images/typescript-tamplate-type/1599490540_32_w2294_h144.png","/images/typescript-tamplate-type/1599490559_10_w820_h538.png","/images/typescript-tamplate-type/1599542552_48_w868_h530.png"],"wordCount":22567},"nodes":[{"type":"tag","children":[{"type":"text","data":"最近 Hejlsberg 提交了一个 PR 让 TS 支持了 Template Type:"},{"type":"tag","children":[],"name":"br","attribs":{}},{"type":"text","data":"\nhttps://github.com/microsoft/TypeScript/pull/40336"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"这个特性目前还没正式发 npm 包，但可以在: "},{"type":"tag","children":[{"type":"text","data":"TypeScript Playground"}],"name":"a","attribs":{"href":"https://www.typescriptlang.org/play?ts=4.1.0-pr-40336-88"}},{"type":"text","data":" 上体验到。"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[],"name":"hr","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"合着这个新特性在 TS 里就可以愉快的将形如 `${XX}` 当成一种新的类型来做类型抽象了, 简单玩玩："}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"00"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"HexNumber0x123"}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"text","data":"0x"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"123"}],"name":"span","attribs":{"className":"token number"}},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"01"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"02"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"DOMEvent"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"Name "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"string"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"03"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"text","data":"on"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"text","data":"Name"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"04"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"05"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"06"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// => 'onClick'"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"07"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"ClickEvt"}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" DOMEvent"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"'Click'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"08"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"09"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 0 ~ F"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"10"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"FROM_0_TO_F"}],"name":"span","attribs":{"className":"token constant"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"11"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"'0'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'1'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'2'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'3'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"12"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"'4'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'5'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'6'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'7'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"13"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"'8'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'9'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'A'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'B'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"14"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"'C'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'D'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'E'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'F'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"15"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"16"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"17"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"Hex"}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"FROM_0_TO_F"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"FROM_0_TO_F"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"18"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"19"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 形如 0xAABBCC"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"20"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"CharHex"}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"text","data":"0x"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"text","data":"Hex"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"21"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"22"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"const"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Char_A"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" CharHex "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"text","data":"0x41"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"23"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"const"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Char_A_Err"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" CharHex "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"text","data":"0xGG"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"// type error"}],"name":"span","attribs":{"className":"token comment"}}],"name":"pre","attribs":{"className":"prismjs ts rally-runner  "}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"Template Type 配合条件类型就可以来做一些匹配字符串的判断，如果再加上条件类型的递归即可实现一些文法处理器了，比方说有大神已经写出了加法计算器了，还有些人写出了 URL Parser，总之… 本文主要探讨这些 Parser 的写作手法。"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"在本文进一步之前，我们先从几个常用 type 来进一步熟悉 template type 这个特性"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"#"}],"name":"a","attribs":{"href":"#numberic-template-union-type","className":"markdownIt-Anchor"}},{"type":"text","data":" Numberic :: Template + Union Type"}],"name":"h1","attribs":{"id":"numberic-template-union-type"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"temaplte 结合 union 可以用来做判断数字的逻辑"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"00"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 长度为 1 的字符串数字"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"01"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"Numberic"}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"02"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"'0'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'1'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'2'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'3'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'4'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"03"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"'5'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'6'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'7'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'8'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'9'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"04"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}}],"name":"pre","attribs":{"className":"prismjs ts rally-runner  "}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"上述 Numberic 可以用来限制一位长度的字符串，但不能限制 n 位长度的字符串类型，如果要实现 n 位的判读，需要引入递归操作："}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"00"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 判断某字符串是不是数字"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"01"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"IsAllNumberic"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"S"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"string"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"02"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"S"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"text","data":"Numberic"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Rest"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"03"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"        "},{"type":"tag","children":[{"type":"text","data":"// S 满足上面的 template type 的时候"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"04"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"        "},{"type":"tag","children":[{"type":"text","data":"// 如果 Rest 是 '' 则返回 true 否则递归返回 IsAllNumberic&lt;Rest>"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"05"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"        "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" Rest "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"true"}],"name":"span","attribs":{"className":"token boolean"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" IsAllNumberic"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"Rest"},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"06"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"        "},{"type":"tag","children":[{"type":"text","data":"// 不满足返回 false"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"07"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"        "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"false"}],"name":"span","attribs":{"className":"token boolean"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"08"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"09"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"10"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"testOneNumberic_1"}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" IsAllNumberic"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"'aaaa'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"// false"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"11"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"testOneNumberic_2"}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" IsAllNumberic"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"'12345'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"// true"}],"name":"span","attribs":{"className":"token comment"}}],"name":"pre","attribs":{"className":"prismjs ts rally-runner  "}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"上述代码建议在 "},{"type":"tag","children":[{"type":"text","data":"Eczn’s TypeScript Playground :: Type Parser For Numberic String"}],"name":"a","attribs":{"href":"https://www.typescriptlang.org/play?ts=4.1.0-pr-40336-88#code/PTAEn9UwyvULjlQRlIELdDq2oMm9BMcoB1NkFgBQALgJ4AOApqAHICuAtgEZkBOAlgMagC8oAFPqANAByAAxDQAH2FxxUoQCZZwgMxKhAFln9BQgKxqAbGoDsagBxqAnEPwBKANz58IUIBIlQLWmgBfM06QPRmgWDlfbHxiclAASQBnAEEAG1iaBmZ2AB4AZVAyAA8CMgA7ABNI0EiCVjyAcwA+Ll5tAQzs3MLigAMAEgBvRMZWNgBfLpY8gDNmUAAlMlL+1vrBARcMwEO7QGbYwCg5QCN0xFBc2hJYgENc3dIKREA300BMBXmFl0AgzUAc80npglBfYXFATCVAFfjAPbVdkxqBRAGQqX0ASAmAJX1-hEYvEesk2CkpqUqrdBAB+F6lTI5fJFUCtVqgLFlYGgABcsLiCTovVSKIIaLwCzuYH8axhI0OsUiZHRAip3N5-LwtichDOu1eAHk8mQEX0APoIbhRGmK1JCQ46w5CKr2UAuYV8kJS3KlOUKumIpXyWrq+E2vopIRweTKdT6A1GsBk0X4IA"}},{"type":"text","data":" 中查看"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"#"}],"name":"a","attribs":{"href":"#headof-类型-template-infer","className":"markdownIt-Anchor"}},{"type":"text","data":" HeadOf 类型 :: Template infer"}],"name":"h1","attribs":{"id":"headof-类型-template-infer"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"00"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 长度为 1 的字符串数字"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"01"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"Numberic"}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"02"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"'0'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'1'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'2'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'3'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'4'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"03"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"'5'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'6'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'7'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'8'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'9'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"04"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"05"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"06"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 取头部"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"07"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// HeadOf&lt;'1234'> ==> '123'"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"08"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"HeadOf"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"S"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"string"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"S"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Before"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"text","data":"Numberic"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" Before "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"never"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}}],"name":"pre","attribs":{"className":"prismjs ts rally-runner  "}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"取出头部 HeadOf 是很常用的工具，比方说实现加法里面 HeadOf 就是数字的除十操作。"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"#"}],"name":"a","attribs":{"href":"#tail-类型-template-条件-infer-递归","className":"markdownIt-Anchor"}},{"type":"text","data":" Tail 类型 :: Template 条件 infer 递归"}],"name":"h1","attribs":{"id":"tail-类型-template-条件-infer-递归"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"00"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 取尾部"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"01"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// Tail&lt;'1234'> ===> '4'"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"02"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"Tail"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"S"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"string"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"03"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"S"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"text","data":"Numberic"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Rest"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"04"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"        "},{"type":"tag","children":[{"type":"text","data":"// 满足上面的情况下且 Rest 是 `` 的时候 说明已经到底了 返回 S 即可，否则递归处理"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"05"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"        "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" Rest "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"S"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" Tail"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"Rest"},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"06"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"        "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"never"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"07"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}}],"name":"pre","attribs":{"className":"prismjs ts rally-runner  "}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"取出尾部 Tail 也是很常用的工具，比方说实现加法里面 Tail 就是数字的对十取模操作 (求个位数)。"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"#"}],"name":"a","attribs":{"href":"#trim-类型-template-条件-infer-递归","className":"markdownIt-Anchor"}},{"type":"text","data":" Trim 类型 :: Template 条件 infer 递归"}],"name":"h1","attribs":{"id":"trim-类型-template-条件-infer-递归"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"按照 js 的语意实现对字符串类型的 trim :"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"00"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 工具函数"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"01"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// Trim&lt;\" var Eczn   \"> ===> \"var Eczn\""}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"02"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 先递归 TrimRight 再 TrimLeft"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"03"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"Trim"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"S"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"string"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"04"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"S"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Before"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":" "}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"05"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"        "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" Trim"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"Before"},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"06"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"        "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"07"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"            "},{"type":"tag","children":[{"type":"text","data":"S"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"text","data":" "}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" After"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"08"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"                "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" Trim"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"After"},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"09"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"                "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"S"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"10"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"        "},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"11"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"12"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"13"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"testTrim"}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" Trim"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"'  var Eczn '"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"14"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// => 'var Eczn'"}],"name":"span","attribs":{"className":"token comment"}}],"name":"pre","attribs":{"className":"prismjs ts rally-runner  "}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"引入 trim 是为了处理字符串两端中多余的空格"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"#"}],"name":"a","attribs":{"href":"#kvpair-的定义和拍平","className":"markdownIt-Anchor"}},{"type":"text","data":" KVPair 的定义和拍平"}],"name":"h1","attribs":{"id":"kvpair-的定义和拍平"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"在处理复杂类型问题的时候总要引入点中间类型来方便转换，比方这里介绍的 KVPair, 他长这样："}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"00"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"type "},{"type":"tag","children":[{"type":"text","data":"KVP"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"K"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"V"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" Rest"},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"K"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"V"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" Rest"},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"01"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"02"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 递归定义了一下"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"03"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"type test "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"KVP"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"'key1'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"1"}],"name":"span","attribs":{"className":"token number"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"KVP"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"'key2'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"2"}],"name":"span","attribs":{"className":"token number"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"null"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"tag","children":[{"type":"text","data":">>"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"04"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 上面这个通过某种递归转换可以拍平为 { key1:1, key2:2 }"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"05"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 这个变换后文会提到"}],"name":"span","attribs":{"className":"token comment"}}],"name":"pre","attribs":{"className":"prismjs tsx rally-runner  "}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"这个结构其实跟 Scheme 里的 cons 结构是类似的，可以用来做函数式数据结构，额 … 总之这个结构可以不需要下标即可遍历，在 TS 里做遍历很重要的一种结构"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[],"name":"hr","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"上面应该已经提过了中间结构 KVP，我们需要利用这种结构生成对象类型出来，比如:"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"00"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 下面这个可以拍平为 { k1: 123 }"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"01"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"p1"}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"\"k1\""}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"\"123\""}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"null"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"02"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"03"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 下面这个可以拍平为 { k1: 123, k2: \"2\" }"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"04"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"p2"}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"05"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"\"k1\""}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"\"123\""}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"06"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"\"k2\""}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'\"2\"'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"null"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"07"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"08"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"09"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 下面这个可以拍平为 { k1: 123, inner: { k3: 3 }, k2: \"2\" }"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"10"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"p3"}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"11"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"\"k1\""}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"\"123\""}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"12"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"\"inner\""}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"\"k3\""}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"\"3\""}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"null"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"\"k2\""}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'\"2\"'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"null"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"13"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}}],"name":"pre","attribs":{"className":"prismjs ts rally-runner  "}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"那么如何从 KVPair 里生成对象呢 ? 我们看到 KVPair 是递归的，可以通过递归遍历的形式来遍历操作，在遍历的过程中即可实现转对象的操作"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"00"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 判断 V 是不是 KVP 结构，是的话用 KVPairsToObj 处理，否则返回其自身"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"01"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"MaybeKVP"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"V"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"V"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"string"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"string"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"any"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" KVPairsToObj"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"V"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"V"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"02"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"03"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 将递归的 KVParis 压平 ..."}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"04"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"KVPairsToObj"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"P"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"P"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"K"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"V"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Rest"},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"05"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"// 先确保 K 可以作为 Key ... 否则我们返回 P 自己"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"06"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"K"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"string"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"number"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"symbol"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"07"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"        Rest "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"null"}],"name":"span","attribs":{"className":"token keyword"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"08"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"            "},{"type":"tag","children":[{"type":"text","data":"// 如果说 Rest 是 null ... 则说明递归到底了, 直接返回 { [K]: V } 即可, 但 V 也有可能是 KVP 因此要 MaybeKVP&lt;V> 递归一下"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"09"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"            "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"{"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"INNERKEY"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"in"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"K"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" MaybeKVP"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"V"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"10"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"            "},{"type":"tag","children":[{"type":"text","data":"// 如果说 Rest 有东西则说明我们需要递归进一步处理"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"11"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"            "},{"type":"tag","children":[{"type":"text","data":"// 注意 INNERKEY 的取值为当前的 K 以及 keyof KVPairsToObj&lt;Rest>, 是的需要在递归里面用到递归的结果"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"12"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"            "},{"type":"tag","children":[{"type":"text","data":"// 然后判断 INNERKEY 是不是 K 如果是的话返回 MaybeKVP&lt;V>"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"13"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"            "},{"type":"tag","children":[{"type":"text","data":"// 否则返回 KVPairsToObj&lt;Rest>[INNERKEY]"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"14"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"            "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"{"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"INNERKEY"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"in"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"K"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"keyof"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" KVPairsToObj"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"Rest"},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"INNERKEY"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"K"}],"name":"span","attribs":{"className":"token constant"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" MaybeKVP"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"V"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" KVPairsToObj"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"Rest"},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"INNERKEY"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"15"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"never"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"16"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"never"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}}],"name":"pre","attribs":{"className":"prismjs ts rally-runner  "}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"注意上面的 "},{"type":"tag","children":[{"type":"text","data":"INNERKEY"}],"name":"code","attribs":{}},{"type":"text","data":" 那块，仔细揣摩 "},{"type":"tag","children":[{"type":"text","data":"KVPairsToObj&lt;Rest&gt;"}],"name":"code","attribs":{}},{"type":"text","data":" 的含义以及 "},{"type":"tag","children":[{"type":"text","data":"KVPairsToObj&lt;Rest&gt;[INNERKEY]"}],"name":"code","attribs":{}},{"type":"text","data":" 代表什么就能看懂了。另外推荐在 "},{"type":"tag","children":[{"type":"text","data":"Eczn’s TypeScript Playground :: KVPairs"}],"name":"a","attribs":{"href":"https://www.typescriptlang.org/play?ts=4.1.0-pr-40336-88#code/PTAEhIlRa01A1VHozQsHL1AaRgBVIZb9Ah5oGH-5AQt0F3owClc1MBDASwCcBnAFQHsB5AIwCtRAQTUDAXfIDIVQJhKgFfjAe2qA3RUBXgYGq4gLAAoAC4BPAA4BTUAFkqajlvQYAPDAB8oALyxQWgB4qtAOwAmDUAG0GKujRcAcwAaUF9-INCqFzUAXVAAfkoMWkZWTi5zKwAuWABuZWUQUEAwHUAkBMAlfSJkqn9PQGjlQGc9UAA6NuV1bRr6ZnZuUwwrWyxHZ3dPLwCAMy06NFDp2dgFlxm5gCUtX3ikgAplUEPQYsAJRUA7D0Bd+TRQQHvlQFO5QB15QC45NC01VrbQUUBEI0AbuUlQFgZIBH3QOR1Q9icrg8oF24QCgVAAB9QC4AK4AWyMcxRDDUWJYABsAJSJWFgo5HTa+SFjGHowmEimUlnFQBBmoAc80AL9GgakqBCotGMj4tUAiLmAODNKoAGJUAqXqAMLlQoAXt0ApcYAgDe3lQsVycAAvqBAM7KN1CgDF5OyAfTlAJDmN0AvwEoEygQAHaoATa0AgZF6AxGExZUCVQAAcoBoOWZLKOSU1XgAkgA5aMAUXWqDjAE1QAE0DrPYZjJhfXqQ6HjmBOTy+aArYAcOUA-pHiiV-QAA6W7KoBt+P9gFNrAQF0PFQAXNoB4Q1AMfjiZToCIgDXlQA8Ck9AMr6gFklaoQu6AKeVQABrN4sKbdNJ9TJ8iyhYiNwAU6pVADOJgCN0sjSypEbAcrussCANkdAHAqUEHsYTSdTSAdoCcsQJAAvo2Y+pYT6UsUogAiYqS9BkpgHlG34jsmsRQUcuQRkOP6jumEIohuahbjuiH9AemZ4ehtLQp4EJJGB3q5pYoC5PBPTpJRWwqBYqHDr+8T5kolKkrkLhaAAbrMyjiai0mzAUShFGAgaXoAm-GAFRy9yALNGjQvJqa4AIy5MZABMADMoAiZ0OgAPr2Swxk2OR3GZF4ABEJmeaEnkWZZvmCoysQWMpqmgOp2l6QZoBGaZoABaEa7mbknnmZ5NkdJoDlOeZrmcbuSFeMy3nGUF-lWb5zJeSlQUAOTpZ59WhAyhKYUooXhUoxRRTpdz6YZ64JUlaYuJJdA4eulm5NZerJaloBNVlqg5aAjkAAzWbYhUUR5pU+X5AXVaJRxeQEE1BbVgV+TdwXtaEtUZaEjUZS192xB1XXKEAA"}},{"type":"text","data":" 里查看上述代码，KM 这里代码显示不好看。"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"#"}],"name":"a","attribs":{"href":"#json-parser-的实现","className":"markdownIt-Anchor"}},{"type":"text","data":" JSON Parser 的实现"}],"name":"h1","attribs":{"id":"json-parser-的实现"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"实现 JSON Parser 关键是从从 raw json string 生成 KVPair，然后借助前文提到的拍平 KVPair 的工具类型去拍平为对象类型:"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"00"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 从 \"  { XXXX }   \" 中取出 XXXX 来 (即取出 json kv string map)"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"01"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"SplitKVStringFrom"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"S"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"string"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"S"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" AnyBlank"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"{"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"INNER"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" AnyBlank"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" KVPairs"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"INNER"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" Trim"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"S"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"02"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"03"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 从 json kv string map 生成一种递归的结构 Pair = [K, V, Pair&lt;string, any>] 表达一个对象的信息"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"04"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"KVPairs"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"S"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"string"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"05"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"S"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" AnyBlank"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"\""}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Key"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"\""}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" AnyBlank"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Rest"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"06"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"        "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" Rest "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Value"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Rest"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"Key"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" SplitKVStringFrom"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"Value"},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" KVPairs"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"Rest"},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"Key"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" SplitKVStringFrom"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"Rest"},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"null"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"07"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"        "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" Trim"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"S"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"08"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"09"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"10"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 原始信息"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"11"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"myjson"}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'{ \"k1\"  :\"v1\" , \"wow\": { \"eczn\": \"喵\" }, \"k2\":   \"v2\",\"k3\":333, \"rrr\": { \"inner\": \"abc\" }  }'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"12"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"13"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 中间 AST 表达"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"14"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"myparis"}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" KVPairs"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"myjson"},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}}],"name":"pre","attribs":{"className":"prismjs ts rally-runner  "}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"最后一步将将 KVPair 转对象类型，这里需借助 前文的 KVPairsToObj 即可实现，详见在线 DEMO： "},{"type":"tag","children":[{"type":"text","data":"Eczn’s TypeScript Playground :: Type Parser For JSON"}],"name":"a","attribs":{"href":"https://www.typescriptlang.org/play?ts=4.1.0-pr-40336-88#code/PTAEhIlRa01A1VHozQsHL1AaRgBVIZb9Ah5oGH-5AQt0F3owClc1MBDASwCcBnAFQHsB5AIwCtRAQTUDAXfIDIVQJhKgFfjAe2qA3RUBXgYGq4gLAAoAC4BPAA4BTUAFkqajlvQYAPDAB8oALyxQWgB4qtAOwAmDUAG0GKujRcAcwAaUF9-INCqFzUAXVAAfkoMWkZWTi5zKwAuWABuZWUQUEAwHUAkBMAlfSJkqn9PQGjlQGc9UAA6NuV1bRr6ZnZuUwwrWyxHZ3dPLwCAMy06NFDp2dgFlxm5gCUtX3ikgAplUEPQYsAJRUA7D0Bd+TRQQHvlQFO5QB15QC45NC01VrbQUUBEI0AbuUlQFgZIBH3QOR1Q9icrg8oF24QCgVAAB9QC4AK4AWyMcxRDDUWJYABsAJSJWFgo5HTa+SFjGHowmEimUlnFQBBmoAc80AL9GgakqBCotGMj4tUAiLmAODNKoAGJUAqXqAMLlQoAXt0ApcYAgDe3lQsVycAAvqBAM7KN1CgDF5OyAfTlAJDmN0AvwEoEygQAHaoATa0AgZF6AxGExZUCVQAAcoBoOWZLKOSU1XgAkgA5aMAUXWqDjAE1QAE0DrPYZjJhfXqQ6HjmBOTy+aArYAcOUA-pHiiV-QAA6W7KoBt+P9gFNrAQF0PFQAXNoB4Q1AMfjiZToCIgDXlQA8Ck9AMr6gFklaoQu6AKeVQABrN4sKbdNJ9TJ8iyhYiNwAU6pVADOJgCN0sjSypEbAcrussCANkdAHAqUEHsYTSdTSAdoCcsQJAAvo2Y+pYT6UsUogAiYqS9BkpgHlG34jsmsRQUcuQRkOP6jumEIohuahbjuiH9AemZ4ehtLQp4EJJGB3q5pYoC5PBPTpJRWwqBYqHDr+8T5kolKkrkLhaAAbrMyjiai0mzAUSiFEoxSAKe6gDuioAv4qAA6mRRgEw-gYqYABEoBSbUoBxgAxgAXi4RymUM1jWFYpmWXMtkOaZBmgCclSgEZNAYusNCBAAFvygCxikFxkADJaFMKgdJoOjBSZADKdHjGEfgIkM5KiUc2WjPRoAAAYACTqoscwAEJJSwdBaAaFVPkkGWmI1UzNVoFhPrk+zFYWJU5TCFWgDVdWgAAgslsx6u1I2jSynXGaY83OHQA0rat2GgJlT7EnJyl+YAc3KgOZoCagAGvdt2gAahzmYAtHLjoAX4qgA9j2AKbmsKGp9oBcAwLCOWuUl5REiIYlQGgnaoaWHRohI0Co6CZflQQAGJ0CwWXjZ48JBIVpVQrl1W1asSyzTE9WEtEa56uq03U3MNF6nqrNrHNdMMy4TOTUkABSmVsNGAD6TBsBLnGMKYNE5HFIWmJlFhnWpYCXSDYPrpDxMw3DoCAPiugAIRv6gCznneeCAqkNhaqEMChCk9CmAbUQxBY8SABYRgB98f6gBUcoAn9qAIYxRCAIfygD2BqlXSi+LUsy3LDCq4TUMFfbw3QWAn4645eDMmTdKeJTM202o9OM3qpnc0sqBvFXNdzGXFcC3q2SN7yvFLU+xSAOd+gC3flA+C4IABAnJDguAdZ3NJlRTHcwFQhJoq1wQd3yS1kl4ddqKEmUo2jGNY4EuP4+Yi-L4eoBx5L0uy9QPTIbxXvsVqby7-v6MwJj0MnyZB6hAyQkmE9pHGKIAOzNABYCZOAEGUjQ3EGsrLKu0EaqWKIAfOVADTmlHGOOgMRqFzvbAA5JqUya4ACM11sgeQoaAUIpkADuLB6GmRwldLQ9kXAsKuoAVtVzJ6joWuAATFwl6UlhHBFIQAZhYZI2RdC6AKK4SQgIkk6BcNMlQDgNk+GHD1IQjWxRXqABfUuamUmCgD9jg0AeCNC1BoJ4Ww18E53xdvLPBud1aoLAIAAHNAATfvnRGXQ8EsG4PbJO3FMg2LsQwXaqkgA"}}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"本文目的不是实现无懈可击的 json parser 而是介绍 template 写 parser 的思路，上述实现并不完整还差数字和数组没有处理，只实现了一个子集，有兴趣的同学可以自行补全这块。"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[],"name":"img","attribs":{"src":"/images/typescript-tamplate-type/1599490540_32_w2294_h144.png","alt":"enter image description here"}}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[],"name":"img","attribs":{"src":"/images/typescript-tamplate-type/1599490559_10_w820_h538.png","alt":"enter image description here"}}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"#"}],"name":"a","attribs":{"href":"#实现加法算数运算","className":"markdownIt-Anchor"}},{"type":"text","data":" 实现加法算数运算"}],"name":"h1","attribs":{"id":"实现加法算数运算"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"算数运算主要还是半加器、进位等这套来做的，当然也可以利用 Church Encoding 来实现，我再实现的过程中用了前者的思路："}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"首先要描述个位数，半加器要用"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"00"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 描述个位数"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"01"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"Numberic"}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'0'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'1'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'2'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'3'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'4'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'5'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'6'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'7'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'8'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'9'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}}],"name":"pre","attribs":{"className":"prismjs ts rally-runner  "}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"然后需要定义个位数的加法，也就是定义好半加器，而定义需要下点小手段，穷举定义的话会比较多代码，简化一下利用递归自增的形式来定义个位数的加法："}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"00"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 定义 0 ~ 18 自增规则"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"01"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 如 IncOne&lt;'9', '1'> ===> '10'"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"02"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"IncOne"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"string"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"03"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'0'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'1'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"   "},{"type":"tag","children":[{"type":"text","data":"// 0 + 1 = 1"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"04"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'1'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'2'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"   "},{"type":"tag","children":[{"type":"text","data":"// 1 + 1 = 2"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"05"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'2'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'3'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"   "},{"type":"tag","children":[{"type":"text","data":"// 2 + 1 = 3"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"06"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'3'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'4'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"   "},{"type":"tag","children":[{"type":"text","data":"// 3 + 1 = 4"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"07"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'4'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'5'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"   "},{"type":"tag","children":[{"type":"text","data":"// 4 + 1 = 5"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"08"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'5'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'6'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"   "},{"type":"tag","children":[{"type":"text","data":"// 5 + 1 = 6"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"09"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'6'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'7'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"   "},{"type":"tag","children":[{"type":"text","data":"// 6 + 1 = 7"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"10"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'7'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'8'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"   "},{"type":"tag","children":[{"type":"text","data":"// 7 + 1 = 8"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"11"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'8'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'9'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"   "},{"type":"tag","children":[{"type":"text","data":"// 8 + 1 = 9"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"12"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'9'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'10'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"   "},{"type":"tag","children":[{"type":"text","data":"// 9 + 1 = 10"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"13"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'10'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'11'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":"// 9 + 1 = 10"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"14"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'11'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'12'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":"// 9 + 1 = 10"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"15"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'12'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'13'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":"// 9 + 1 = 10"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"16"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'13'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'14'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":"// 9 + 1 = 10"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"17"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'14'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'15'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":"// 9 + 1 = 10"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"18"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'15'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'16'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":"// 9 + 1 = 10"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"19"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'16'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'17'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":"// 9 + 1 = 10"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"20"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'17'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'18'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":"// 9 + 1 = 10"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"21"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'18'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'19'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":"// 9 + 1 = 10"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"22"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"never"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"23"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"24"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"25"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 由 IncOne 定义 0 ~ 9 范围内的任意加法 [0, 9] + [0, 9]"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"26"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 如 IncX&lt;'9', '9'> ===> '18'"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"27"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"IncX"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"string"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"B"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"string"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"28"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"B"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'0'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":"// 0 + 1 = 1"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"29"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"B"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'1'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" IncX"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"IncOne"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'0'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":"// 1 + 1 = 2"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"30"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"B"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'2'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" IncX"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"IncOne"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'1'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":"// 2 + 1 = 3"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"31"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"B"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'3'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" IncX"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"IncOne"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'2'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":"// 3 + 1 = 4"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"32"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"B"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'4'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" IncX"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"IncOne"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'3'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":"// 4 + 1 = 5"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"33"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"B"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'5'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" IncX"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"IncOne"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'4'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":"// 5 + 1 = 6"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"34"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"B"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'6'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" IncX"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"IncOne"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'5'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":"// 6 + 1 = 7"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"35"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"B"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'7'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" IncX"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"IncOne"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'6'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":"// 7 + 1 = 8"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"36"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"B"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'8'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" IncX"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"IncOne"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'7'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":"// 8 + 1 = 9"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"37"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"B"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'9'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" IncX"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"IncOne"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'8'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":"// 9 + 1 = 10"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"38"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"39"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}}],"name":"pre","attribs":{"className":"prismjs ts rally-runner  "}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"然后取出个位数和十位数的这些可以使用本文一开始的 HeadOf 和 Tail，最后整理一下："}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"00"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 加法: A B 为加数, C 是进位, 默认为 0"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"01"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"Add"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"string"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"B"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"string"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"C"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"string"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'0'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"02"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"''"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"C"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'1'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" Add"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"B"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"C"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"B"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"03"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"B"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"''"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"C"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'1'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" Add"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"C"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"04"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'0'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"C"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'1'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" Add"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"B"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"C"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"B"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"05"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"B"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'0'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"C"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'1'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" Add"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"C"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"06"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"// @ts-ignore 这块递归比较多 TS 会有警告, 故加了个 ts-ignore"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"07"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"text","data":"Add"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" HeadOf"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" HeadOf"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"B"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" HeadOf"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"IncX"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"Tail"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" Tail"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"B"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">>>"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"text","data":"Tail"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" IncX"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"IncX"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"Tail"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"A"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" Tail"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"B"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">>"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"C"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"08"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}}],"name":"pre","attribs":{"className":"prismjs ts rally-runner  "}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[],"name":"img","attribs":{"src":"/images/typescript-tamplate-type/1599542552_48_w868_h530.png","alt":"enter image description here"}}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"完整实现见 "},{"type":"tag","children":[{"type":"text","data":"Eczn’s TypeScript Playground :: Type Parser For Addition Transform"}],"name":"a","attribs":{"href":"https://www.typescriptlang.org/play?ts=4.1.0-pr-40336-88#code/PTAEnnjQH+MKjlFl5QHUwLACgAuBPADgU1AOQFcBbAI2wCcBLAY1AF5QByABkdAB8mBGNzxgJl5MAzEMYAWMQFYxANjEB2MQA4xATkYBuFChChAWdqBJOVDNQAP1BdloQFeBgPI1AI5GBMJV1hAQZqgAkgDtqAeW9sAB5GDQAabkYAPno6OhjGLlYUDBwvXwDggEFQbAAPVGxvABMAZ1BS1CpvAHMYhgAKFFAW0Bz8wpLyljYAfkiWgC5WvVMAakt6S2bW9oKisoH+gTZQYZa9LlAJrYZ+GZa5zsWV0GXRIZGwfm3JhmEDttz5rpE+pklLjbBhW93QcSPI4LbqfZYyL6gPTiP5TKRA57HboQ5bySF6KSwhiyBEdEFMNHLJTosCyLGgBS4l4nYnLVQkink5RUpFMenLDQM6w7KZqFn40LvRKsNZXUBqclJfmvYVCrg8UVQsASnkMKXIVpPPEy+VywSKvQqu6WZjSk5cfXLLgXdaGyWmjWzREC61yz625X2s3dLhg7gQj3ir2Ow7OnUo7howNG-7qzXAnWE7jE6PB+Nh8207j01Oqk3e7Nyzm541x1qBABuFBQAEptMhXKBAIyu6X8gQMxlMFglgGBgwAvaoBQxUAIW6Ab7lAPCGgAKlQCrNqAANrMCJqAC6t3ni6XjY8PmoAA0QuEmBp6nEElZGCksLht3uE4tKtUahEAEIZ8r3yi1eqgJoh0Av7UnCK-Q5AaYDjKWjz-tSPrvNeQTbpkQRZFEEQ9DEoGTHm+y-lBrKnP0cEIYESEoZE6GBjceYPDhr5vGcrZ7kR2SkSs5HfKAvx5oCNEAaCsG+IxGTEchqGiGxSoAuS8I8dBTARoRQnMahkjiRi5I4jJeFJgpbZKXJ0RfHoZJ5pSmkClmOmISJBIGRhChMpBtGMOyDHwYpJGoUoqlgNyxp8mZMqcgRAlubpHlsrZJaxg68a1vWjaAGvKgAsmoAFwmNgAEtgACGxR+AAZiEFrCCpsSnvwogXmkmU5flQQAMq0e+n5TA1vGgAABgAJAA3h+eUUH+2B5QA9uQ2AAL49YQpAUDQ43tfRT5DaNuDDJWFDxcgegJYAfDppVtYAACpZZQAA2hXlSVcTxB855oJeoDHWd9WNVUH51FMP6aq1sldd101kFQ1CTb13j9eQoAAErYJU82PJq-TQ5UtHtQt-QNcMT3nUjqBRPDrRrdgVbkHFOgHaA07DDkL6AFxyE7wBEADCoCAPRmgDb8bAESABt5gAl0TTJiVbgWTFMUSGvQ+z7i+9TNS7UUxoZ9BaMKs-TM21iTvMLotPkzMTDC+gyOerKugGrska-RWtIbroo5Ibv63t0QGm05CrASLQQ66bet-msRvm87Zt4W7bQe1kNtU37v56AAAqgpQALSUDU3graAgCb8YA6uqAEgJgBK+oAK9aAMHxgBYmo9DWAFjygCQ5oAZtGAFIqESAKKmE6AGFy0CgPHScpytjx-VboDVblBXWQPtVPqRI8FXBWPhdPY9RDEUQg9PrlTyd53WbP8824v7Wkw25OANK2gCr0YAFK6ANHygvtzDqBa-8Vsa6hPBRJomoSSsl+FJUWs3Aw9-yMp0QX6aj0LKD+18ta-F-h7RIohUL8HkM-MUjBhAaDAV-EWMIoGi0SJIOBCCgFv3EMkfeqRcCfxviLTEWCQgoMYI-QBwCwASGIaQq+6DihkmoaENQPCDwa0QSApIzBhEsIeuQrW9kuG8J4XQpgggBFMKEcIngaCKHFGsFwngqFpFHhfoIkRwi7qqK1hKTRsiH5kSASAiq900jiJFkkKY99WDaPMU-PRijiEoCAA"}}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"乘法的计算可以利用加法递归定义；求余其实就是 Tail 取模其实是 HeadOf … 总之其他的运算都还算可以做。"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"#"}],"name":"a","attribs":{"href":"#实现-url-parser","className":"markdownIt-Anchor"}},{"type":"text","data":" 实现 URL Parser"}],"name":"h1","attribs":{"id":"实现-url-parser"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"根据 URL 的定义可以很快写出:"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"00"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"MakeUrl"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"Protocol"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" Domain"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" Port"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" Pathname"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" Search"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" Hash"},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"{"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"01"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    protocol"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" Protocol"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"02"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    domain"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" Domain"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"03"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    port"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" Port"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"04"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    pathname"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" Pathname"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"05"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    search"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" Search"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"06"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    hash"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" Hash\n"},{"type":"tag","children":[{"type":"text","data":"07"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"08"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"09"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"URLParse"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"U"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"string"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"10"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"U"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Protocol"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"://"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Domain"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Port"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"/"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Pathname"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'AA'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'BB'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"11"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"// 这里停顿一下... Port 是可省略的 ... 这里又必填了"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"12"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}}],"name":"pre","attribs":{"className":"prismjs ts rally-runner  "}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"写到这里发现 URL 里有些字段是可以不用填的，因此上面的做法很局限，不好搞全全部情况。"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"斟酌之后考虑用 KVPair 的结构来解析："}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"00"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 解析 URL 为对象类型"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"01"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"URLParse"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"U"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" KVPairsToObj"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"URLKVPairs"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"U"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">>"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"02"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"03"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 解析 URL 为 KVPairs"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"04"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"URLKVPairs"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"U"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"05"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"U"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Protocol"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"://"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Rest"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"'protocol'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" Protocol"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" ParseDomain"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"Rest"},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"06"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"U"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"text","data":"//"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Rest"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"'protocol'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"null"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" ParseDomain"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"Rest"},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"07"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"never"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"08"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"09"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"10"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 解析 Domain"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"11"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"ParseDomain"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"U"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"12"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"U"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Domain"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Port"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"/"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Rest"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"'domain'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" Domain"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"'port'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" Port"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" ParsePathname"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"Rest"},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"13"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"U"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Domain"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Port"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"'domain'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" Domain"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"'port'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" Port"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"null"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"14"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"U"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Domain"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"/"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Rest"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"'domain'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" Domain"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"'port'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"null"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" ParsePathname"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"Rest"},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"15"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"'domain'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"U"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"null"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"16"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"17"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"18"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 解析 Pathname"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"19"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"ParsePathname"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"U"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"20"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"U"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Pathname"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Search"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"#"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Hash"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"'pathname'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" Pathname"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"'search'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" Search"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"'hash'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" Hash"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"null"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"21"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"U"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Pathname"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Search"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"'pathname'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" Pathname"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"'search'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" Search"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"null"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"22"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"'pathname'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"U"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"null"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"23"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}}],"name":"pre","attribs":{"className":"prismjs ts rally-runner  "}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"总之我的思路就是想办法得到 KVPair 最后 pair 转 obj"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"00"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"https://eczn.local/a.html?aaa"},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"bbb"},{"type":"tag","children":[{"type":"text","data":"#hash"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"01"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"'protocol'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":", "},{"type":"tag","children":[{"type":"text","data":"'https'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":", ParseDoamin"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"'eczn.local/a.html?aaa=bbb#hash'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"02"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"03"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"ParseDoamin"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"'eczn.local/a.html?aaa=bbb#hash'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"04"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"'domain'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":", "},{"type":"tag","children":[{"type":"text","data":"'eczn.local'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":", "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"'port'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":", null, ParsePathname"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"'a.html?aaa=bbb#hash'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"05"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"06"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"ParsePathname"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"'a.html?aaa=bbb#hash'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"07"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"'pathanme'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":", "},{"type":"tag","children":[{"type":"text","data":"'a.html'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":", "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"'search'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":", "},{"type":"tag","children":[{"type":"text","data":"'aaa=bbb'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":", "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"'hash'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":", "},{"type":"tag","children":[{"type":"text","data":"'hash'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":", null"},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"08"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"09"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"最后是一个 "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"K, V, "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"K2, V2, "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"K3, V3, null"},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" 的递归结构，将其转为 obj 即可（前面 JSON Parser 已经实现了"},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}}],"name":"pre","attribs":{"className":"prismjs bash rally-runner  "}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"完整实现详见: "},{"type":"tag","children":[{"type":"text","data":"Eczn’s TypeScript Playground :: Type Parser For URL"}],"name":"a","attribs":{"href":"https://www.typescriptlang.org/play?ts=4.1.0-pr-40336-88#code/LAKALgngDgpgBAaQGoAUCGBLATgZwCoD2A8gEYBWAPCgHxwC8cKcMAHmDAHYAmOcA2hg4AzGFkQAaOIJFikk6aLgAlGDjABdOAH44AClBxDiZm0489arIIDmcAD5wOAVwC2JRQ5wQ3BADYBKbT0DI1CVNRN2bl5nX18Q0MSggG9+AEkAOQyAUSUEbIBNKQ5EdQAuOCRIs14+SxtJeo5rSTQOCE0dZHRsfGJyCiRaCqqAXwSkowrUvkycvMLi4wcAaxgIAiFEVExcQlJKcLBqcrg53Pyi1ijzBCDdKuua-iaWuFfW9s7tnr3+yiGcBGgQq3V2fQOFCO1FmWQuhU04xAoRBjhgADdRKBURwMaIANygUAAemJcEAx5GABPM4ABVJQAGTggC45QCf2oBDGMA3j6AaPVQJBYLSGehcDAKDTaAwwb19gM6fTJbhRdRqISQCSyVSBYymT9wbzoPBZfKcIr6MFkUYadVonAAAYAEmSCjEKCwBDABAAxn5RmVSQ6ncpVGBRjagnwAORQV3ur2+cOSF1uz1+BNoYUAEQILkwHChQZOQImlqe1ptfsdwkURxDYcj0eTccksV8qYzWZzebUBbKE1xmKw2JVaop1Mz2cEev5QpwMDHHbFpv05sMxdMpf9lbEc8EPo3MkYBCwweJe6rQZrOgjXHbgnjcG3HEkEagh7Ad5Qr9bM-QYAAFhw0BcEVoXUTQe2XWkrXMe0K33B9d1gxQPyPC9+HDa9xw4O8HyfSNX3fT9HCcOJQMLCDVxuXgYIDeCT0QsRq1DS90JvLDJBwtCXyPO9my-GAf3-QDgPzUjwNCK9WLvGkm2I3x1GxIkQFJEdGDQP8AKAyd4Gnfi1MEoCTQYJdQgo55qM3VT1KE0YtFPMQAGUYDTD1f1GABiOy4AACTQHBXKYzi9I0mB3yCoTcJnZzfzvRyotw39fOiyQfL8mSSNEosoKozyBOCmzPNirAXNQ58wqA0KrKAiKnKKpK4EKly0rksCJlKyqQskaSiJIhTVSUslAGlbQBV6MACldAGj5LS4CcLBfAARlNWUdIocNfzAMAoBwX1iRgD0AC8OAAOl8T00F8Yk0GJEhiQ9A7VpcXwtCcQQ6FmgBOd7XoAMhIEg6BIdFTqcGA3LIJw1AAWgSvzIdEELlUm6bfAAJgWwU0xnZbVvWzbSR2-ajpOs7Huet6Pu+37-sB4HQYhqHfxhrA4aHcB9SmmaAGZUfpJaVrWjatrxw7jo9U7w3hln+URgAWLmedxvahcJsXmb5eBEYAVll9GRV57GBYVgmRbOtBbrAe7lYRmaADYteFTG+Zx7aDeF07iS0NAPc9tA-p+n6LZAIA"}}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"#"}],"name":"a","attribs":{"href":"#实现-querystring-parser","className":"markdownIt-Anchor"}},{"type":"text","data":" 实现 QueryString Parser"}],"name":"h1","attribs":{"id":"实现-querystring-parser"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"上面 URL Parser 并没有帮忙 parse querystring，这里也补一个, 道理也是类似的，从字符串生成 KVP 再转 object"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"00"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// Query 字符串转 KVP 结构"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"01"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"QueryParseToKVP"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"S"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"string"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"02"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"S"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Key"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Value"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"&amp;"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Rest"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"03"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"        "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"Key"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" Value"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" QueryParseToKVP"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"Rest"},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"            "},{"type":"tag","children":[{"type":"text","data":"// 这种情况直接解析"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"04"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"        "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"S"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Key2"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Value2"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"05"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"            "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"Key2"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" Value2"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"null"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"                  "},{"type":"tag","children":[{"type":"text","data":"// 这种情况代表到最后一项了"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"06"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"            "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"null"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":"                                  "},{"type":"tag","children":[{"type":"text","data":"// 否则返回 null"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"07"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}}],"name":"pre","attribs":{"className":"prismjs ts rally-runner  "}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"Eczn’s TypeScript Playground :: Type Parser For QueryString"}],"name":"a","attribs":{"href":"https://www.typescriptlang.org/play?ts=4.1.0-pr-40336-88#code/PTAEhIlRa01A1VHozQsHL1AaRgBVIZb9Ah5oGH-5AQt0F3owClc1MBDASwCcBnAFQHsB5AIwCtRAQTUDAXfIDIVQJhKgFfjAe2qA3RUBXgYGq4gLAAoAC4BPAA4BTUAFkqajlvQYAPDAB8oALyxQWgB4qtAOwAmDUAG0GKujRcAcwAaUF9-INCqFzUAXVAAfkoMWkZWTi5zKwAuWABuZWUQUEAwHUAkBMAlfSJkqn9PQGjlQGc9UAA6NuV1bRr6ZnZuUwwrWyxHZ3dPLwCAMy06NFDp2dgFlxm5gCUtX3ikgAplUEPQYsAJRUA7D0Bd+TRQQHvlQFO5QB15QC45NC01VrbQUUBEI0AbuUlQFgZIBH3QOR1Q9icrg8oF24QCgVAAB9QC4AK4AWyMcxRDDUWJYABsAJSJWFgo5HTa+SFjGHowmEimUlnFQBBmoAc80AL9GgakqBCotGMj4tUAiLmAODNKoAGJUAqXqAMLlQoAXt0ApcYAgDe3lQsVycAAvqBAM7KN1CgDF5OyAfTlAJDmN0AvwEoEygQAHaoATa0AgZF6AxGExZUCVQAAcoBoOWZLKOSU1XgAkgA5aMAUXWqDjAE1QAE0DrPYZjJhfXqQ6HjmBOTy+aArYAcOUA-pHiiV-QAA6W7KoBt+P9gFNrAQF0PFQAXNoB4Q1AMfjiZToCIgDXlQA8Ck9AMr6gFklaoQu6AKeVQABrN4sKbdNJ9TJ8iyhYiNwAU6pVADOJgCN0sjSypEbAcrussCANkdAHAqUEHsYTSdTSAdoCcsQJAAvo2Y+pYT6UsUogAiYqS9BkpgHlG34jsmsRQUcuQRkOP6jumEIohuahbjuiH9AemZ4ehtLQp4EJJGB3q5pYoC5PBPTpJRWwqBYqHDr+8T5kolKkrkLhaAAbrMyjiai0mzAUShFGAACKaKzO8gDq2oAZN6AExygA28ckOC4B0mg6BpWkpIwWisD6ADKdHjGEfgIkM5KiUcTmjPRoAAAYACTqoscyoG8erWMFoWwFQhKaXqABk0WrEsfJ6v5T5JF44VqKEMBxZpoRWXQag2QwdksD6VGFs+oCAJvxgCznoAowaAK2KqqAMeRgAJ5k+uQ+VCLlBSFqVhW8ABMkUpWssXxVoE2ZV5tWHNluVjflhVzaEDKEvES21cUTVtYAx3KABYR0qAADmb7+oAnhnylhhwSUKhJ7S9r1Fl84gSIKjJycpqmgJqVC5AA5AAjMDoAiZ0OgAPowwAjlQNjkdxmSgCVZW1BV9m5sDVDWODVgWH9SjFIDIPg6EHAg2NENQxZoBw4jHDI5xu5IejmmleVlU+njBOJRw1i00TJNk6AQOgGDwNUzTMugAAxiDADM8tuCDAAsdPmV0TNUBwCtuKz1BcXupic9ZWO87j+Og4LwuJQr1jK4lbjWFrovKEAA"}}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"#"}],"name":"a","attribs":{"href":"#实现-uuid-type-check","className":"markdownIt-Anchor"}},{"type":"text","data":" 实现 UUID Type Check"}],"name":"h1","attribs":{"id":"实现-uuid-type-check"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"校验某字符串是否满足 uuid 的规则:"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"00"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"StrHex"}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'1'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'2'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'3'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'4'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'5'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'6'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'7'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'8'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'9'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'0'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'A'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'B'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'C'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'D'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'E'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'F'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'a'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'b'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'c'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'d'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'e'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"|"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'f'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"01"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"02"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 返回长度, 如 StrHexCons&lt;'1234'> ===> '4'"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"03"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"StrHexCons"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"S"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"string"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"ACC"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"keyof"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" AddOneMap "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'0'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"04"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"S"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"text","data":"StrHex"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Rest"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"05"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"        "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" StrHexCons"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"Rest"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" AddOneMap"},{"type":"tag","children":[{"type":"text","data":"["}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"ACC"}],"name":"span","attribs":{"className":"token constant"}},{"type":"tag","children":[{"type":"text","data":"]"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"06"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"        "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"ACC"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"07"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"08"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"09"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"AddOneMap"}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"{"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"10"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"'0'"}],"name":"span","attribs":{"className":"token string-property property"}},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'1'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"11"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"'1'"}],"name":"span","attribs":{"className":"token string-property property"}},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'2'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"12"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"'2'"}],"name":"span","attribs":{"className":"token string-property property"}},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'3'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"13"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"'3'"}],"name":"span","attribs":{"className":"token string-property property"}},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'4'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"14"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"'4'"}],"name":"span","attribs":{"className":"token string-property property"}},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'5'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"15"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"'5'"}],"name":"span","attribs":{"className":"token string-property property"}},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'6'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"16"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"'6'"}],"name":"span","attribs":{"className":"token string-property property"}},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'7'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"17"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"'7'"}],"name":"span","attribs":{"className":"token string-property property"}},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'8'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"18"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"'8'"}],"name":"span","attribs":{"className":"token string-property property"}},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'9'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"19"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"'9'"}],"name":"span","attribs":{"className":"token string-property property"}},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'10'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"20"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"'10'"}],"name":"span","attribs":{"className":"token string-property property"}},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'11'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"21"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"'11'"}],"name":"span","attribs":{"className":"token string-property property"}},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'12'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"22"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"'12'"}],"name":"span","attribs":{"className":"token string-property property"}},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'13'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"23"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"'13'"}],"name":"span","attribs":{"className":"token string-property property"}},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"never"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"// 12 对应 13 ... 会导致 AddOneMap[keyof AddOneMap] 出现问题"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"24"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"25"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"26"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"IsUUID"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"S"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"string"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"27"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"S"}],"name":"span","attribs":{"className":"token constant"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" One"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"-"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Two"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"-"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Three"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"-"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"infer"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" Four"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"28"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"        "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"29"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"            "},{"type":"tag","children":[{"type":"text","data":"'8'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"StrHexCons"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"One"},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"30"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"                "},{"type":"tag","children":[{"type":"text","data":"'4'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"StrHexCons"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"Two"},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"31"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"                    "},{"type":"tag","children":[{"type":"text","data":"'4'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"StrHexCons"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"Three"},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"32"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"                        "},{"type":"tag","children":[{"type":"text","data":"'12'"}],"name":"span","attribs":{"className":"token string"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"extends"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"StrHexCons"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"Four"},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"?"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"33"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"                            "},{"type":"tag","children":[{"type":"text","data":"true"}],"name":"span","attribs":{"className":"token boolean"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"34"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"                        "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"false"}],"name":"span","attribs":{"className":"token boolean"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"35"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"                    "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"false"}],"name":"span","attribs":{"className":"token boolean"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"36"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"                "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"false"}],"name":"span","attribs":{"className":"token boolean"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"37"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"            "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"false"}],"name":"span","attribs":{"className":"token boolean"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"38"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"        "},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"39"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"        "},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"false"}],"name":"span","attribs":{"className":"token boolean"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"40"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"41"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"42"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"__a"}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" IsUUID"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"'12345678-1234-1234-15123456789ABC'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"// false"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"43"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"__b"}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" IsUUID"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"'12345678-1234-1234-123456789ABC'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"// true"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"44"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"__c"}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" IsUUID"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"'123456**-1234-1234-123456789ABC'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"// false"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"45"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"type"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"__d"}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" IsUUID"},{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":"'12345678-1&amp;24-1234-123456789ABC'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token operator"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"// false"}],"name":"span","attribs":{"className":"token comment"}}],"name":"pre","attribs":{"className":"prismjs ts rally-runner  "}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"Eczn’s TypeScript Playground :: Type Check For UUID String"}],"name":"a","attribs":{"href":"https://www.typescriptlang.org/play?ts=4.1.0-pr-40336-88#code/C4TwDgpgBAysBOAJCAPKBeKByAjFqAPtgEz5FYDMZ2ALNVgKz0Bs9A7PQBz0Cc9ADPQCC9AEL0AwvQAi9AKL0AYvQCG9AEb0AxvQAm9CPQBmWANwBYAFBWA9DaiAV+MB7aoH9UwGV6AGiiAgzVgJkKBIA9gB2AM4APLjEFHQAfBjo6AlYdFagkH5IqMHhETBQqMAQIbphUGEIAJYhAOZeQhIShSjFpeUA1hAgQUZQQrq6APIhEACyKmAY2IIJmAAUVlDLsC1tZVAABgAkAN5w2SgAvns1RhDwUABKEJVHm0srTwD8WQG5kTeVDYMj45MAbUaEgAunFHk9lgAufpNKwASgs1ksGWgA2GowmU0wuwhMywMNwWA8eKJhNIJMsTywpEJVEp1KohLoDJWqQJ2CYrOWjA5WFY3OwrEJHEFWA4hO4Yu4hL4Yr4hJwgjFSr5ODwpPVatImtp2Bw9M1TKgowAbhcvHYoDhiFBAJ-agBS9a0UKAAOndUEAWPKAH+1AC+B-V+mMBXR6fXRfyxIKggC-FQANzoA71MAGRlWI5WdLgaAASTCAFUc5npPk1iUNpV4DVanMoIsqSsCkUS+UdrszhcoH8jgBaU4hc6XAAqAHcgl2e32oP2ABbwCAQUct3ttxRBACu8HueJe1c3kJ53GL7TeOVCkT+CWeO931LoB42B3eJ4iQ6C58vV937Nv5Xvx7yU5nECvrW74gZC0T4A2h4-oEj7LmuQGgYhV4ICuEBvkhTwwkYKgADZhGhwEYZhUDYXhBFEdCJG4fh6ErFh1HkVe8JvvRZEIki6aZAA+lxKjTNmeYFlENqxAwzBsJwnYiTQUkxDJOAMNJYkSTwQiiFIcSmFAVqkTRKIZlAPHqPxub5oW0SieJknSbJsS2TQymcKp6lYJp2n2ChBGooZXFaCZgnmUpzAAFTBfZ4VBSpakaVpOkMZx0A8bo-lmcJcmOVJABkxDyXJ9mOc5MXuVRbGWEAA"}}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"#"}],"name":"a","attribs":{"href":"#template-type-小结","className":"markdownIt-Anchor"}},{"type":"text","data":" Template Type 小结"}],"name":"h1","attribs":{"id":"template-type-小结"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"私以为的 Template Type 的几个关键点 :"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"静态的 Template Pattern 产生了变化的 string 字面量"}],"name":"li","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"利用 KVP 结构来做 Parser / 遍历事半功倍"}],"name":"li","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"类型系统完全可以当成单独的语言系统来看待, 可以被形式化验证"}],"name":"li","attribs":{}},{"type":"text","data":"\n"}],"name":"ol","attribs":{}},{"type":"text","data":"\n"}],"rawContent":""}}}},"BlogApiState":{"loaded":false,"loading":false,"error":null,"dataMap":{}},"HomeApi":{"loaded":false,"loading":false,"error":null,"dataMap":{}},"TimeLineApiState":{"loaded":false,"loading":false,"error":null,"dataMap":{}},"SettingApi":{"loaded":false,"loading":false,"error":null,"dataMap":{}},"LaunchpadApi":{"loaded":false,"loading":false,"error":null,"dataMap":{}}}</script>
<!--SCRIPT-->
</body>
</html>
