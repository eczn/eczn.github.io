<!DOCTYPE html>
<html lang="zh-Hans">
<head>
<title>编程语言 | 对 JavaScript / TypeScript 的批评 | Eczn's Home</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no,minimal-ui">
<meta name="format-detection" content="telephone=no">

<style id="CSS_VARS"></style>
<script>
(function() {
console.log('INIT CSS VAR');
function loadCSSVars() {
    const j = localStorage.getItem("CSS_VARS_2" /* STORAGE_KEY.CSS_VARS */);
    const initialVars = initialCSSVars();
    if (!j)
        return initialVars;
    try {
        const result = {
            ...initialVars,
            ...JSON.parse(j)
        };
        console.log('loadCSSVars from storage', result);
        return result;
    }
    catch (error) {
        console.error('load css vars with error', error);
        return initialVars;
    }
}
function renderCSSVars(vars, style) {
    const allDefine = Object.keys(vars).map(k => {
        const v = vars[k];
        const cssValue = typeof v === 'number' ? `${v}px` : v;
        return `--${k}:${cssValue};`;
    }).join('\n');
    if (style) {
        style.innerHTML = `:root { ${allDefine} }`;
    }
    else {
        console.error(`style#CSS_VARS NotFound !`);
    }
}
function initialCSSVars() {
    let rem = 16;
    // 移动端
    if (typeof window !== 'undefined' && window.innerWidth <= 500) {
        rem = Number(((window.innerWidth - 20) / 42).toFixed(1));
        console.log('mobile calculated rem =>', rem);
    }
    return {
        rem,
        enableSmallerFont: false,
        displayToc: 'block',
        fontSmcp: 'source serif pro, serif',
        fontCode: 'consolas, Menlo, monospace',
        fontTitle: 'Noto Serif SC, serif',
        fontArticle: 'source serif pro, LXGW WenKai',
        fontSansSerif: 'sans-serif',
    };
}
window.__initialCSSVars = loadCSSVars();
renderCSSVars(__initialCSSVars, document.querySelector('#CSS_VARS'));
})();
</script>

<link rel="icon" href="/favicon.png"><script defer="defer" src="/js/index.9e78ae3e.js"></script><script defer="defer" src="/js/chunk-lib.c90ce4c7.js"></script><link href="/css/index.c4ce933c53a7f69254b1.css" rel="stylesheet"><link href="/css/chunk-lib.5c7d4887bb8714b00c54.css" rel="stylesheet"></head>
<body x-apple-data-detectors="none">
<noscript>当前浏览器不支持 JavaScript, 建议使用支持 JavaScript 的浏览器来访问此网站 !</noscript>
<div id="rally-bg" style="opacity:0"></div>
<div id="app"><div class="ball-canvas-container"></div><nav class="nav-main --fontSmcp"><div class="_title default-max-width">Eczn&#x27;s Home</div><div class="smcphr"></div><div class="_links default-max-width"><a class="r-link _link clickable r-link" href="/">Home</a><a class="r-link _link clickable r-link" href="/tl/0/">Timeline</a><a class="r-link _link clickable r-link" href="/cate/all/">Category</a><a class="r-link _link clickable r-link" href="/setting/">Setting</a><a class="r-link _link clickable r-link" href="/launchpad/">Launchpad</a></div></nav><div class="std-box category-main category-detail default-max-width"><div class="std-box-content "><div class="_cate-header"><div class="_blog-links"><a class="r-link _blog-link --fontTitle _active" href="/cate/编程语言/criticism-for-js-ts/"><span class="_nth">#<!-- -->0</span>对 JavaScript / TypeScript 的批评</a><a class="r-link _blog-link --fontTitle" href="/cate/编程语言/why-typescript-begin-to-be-popular/"><span class="_nth">#<!-- -->1</span>TypeScript 为何流行</a><a class="r-link _blog-link --fontTitle" href="/cate/编程语言/should-we-use-array-includes-for-condition-connection/"><span class="_nth">#<!-- -->2</span>可否用数组 includes 来取代条件集联判断</a></div><div class="_cate-title --fontTitle">分类「 <!-- -->编程语言<!-- --> 」</div></div><div><div id="start" class="blog-header-main"><div class="_infos"><div class="_info"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="clock" class="svg-inline--fa fa-clock fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"></path></svg>2021-07-25</div></div><div class="_title --fontTitle">对 JavaScript / TypeScript 的批评</div></div><article><div class="r-article"><div class="std-para --fontArticle" data-minimap-color="#CCCCCC">写几年 js/ts 了，在这里喷一下。</div>
<h1 id="各方面的一致性" class="std-title --fontTitle"><a target="_blank" href="#各方面的一致性" class="markdownIt-Anchor">#</a> 各方面的一致性<i data-minimap="Ignore"> ↵ </i></h1>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">我们先从如何构造字符串开始谈谈，在 JavaScript 里通常用单引号或者双引号来表示字符串，也可以用模版字符串来表达字符串，比如：</div>
<div class="std-code"><pre class="prismjs ts rally-runner  "><span style="user-select:none" class="line-numbers-rows">00</span><span class="token keyword">const</span> str1<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&#x27;hello, world 1&#x27;</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">01</span><span class="token keyword">const</span> str2<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;hello, world 2&quot;</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">02</span><span class="token keyword">const</span> str3<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hello, world 3</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">03</span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str1<span class="token punctuation">,</span> str2<span class="token punctuation">,</span> str3<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">该用哪种方式做字符串构造呢？这显然是一个主观问题，有的人认为单引号好，也有人觉得双引号好，更有人觉得模版字符串是最好的 …</div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">然而，如果严格遵守语言设计所谓的一致性原则，只会剩下一种构造法了，比如说只留下单引号，它能支持模版字符串的所有特性:</div>
<div class="std-code"><pre class="prismjs js rally-runner  "><span style="user-select:none" class="line-numbers-rows">00</span><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">01</span><span class="token comment">// 另外一个平行世界里的 js 支持单引号模版</span>
<span style="user-select:none" class="line-numbers-rows">02</span><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">&#x27;the a is ${a}&#x27;</span><span class="token punctuation">;</span></pre></div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">然后便不会有人纠结用哪种构造方法了，eslint 也不必开发出三种构造方式 … 这里锅主要是为了兼容历史代码，不是 tc39 的问题，因为社区在模版字符串之前就有类似的 logger 组件了</div>
<div class="std-code"><pre class="prismjs ts rally-runner  "><span style="user-select:none" class="line-numbers-rows">00</span>logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&#x27;asd ${aa}&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> aa<span class="token operator">:</span> <span class="token number">123</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div>
<hr class="std-hr"/>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">JS 一致性差还可以在诸多设计细节中窥见</div>
<ul class="std-list">
<li>分号可写可不写 … 导致引擎实现方不得不实现了 ASI 自动分号插入 (eslint / babel 开发者也一样得去实现) 这些都造成了无谓的浪费 —— 一开始设计就强制分号或者没有分号不就好了?</li>
<li>语言有两个空值 <code>undefined</code> 和 <code>null</code> 两者又有各种微妙的不同</li>
<li><code>typeof</code> 的问题，比如 <code>typeof null</code> 和 <code>typeof []</code></li>
<li>模块标准不一致 —— 社区里存在事实上的 require 模块标准 和 ES Module</li>
<li>toString, valueOf 这些方法没有像 Symbol.iterator 那样的 symbol 常量 （简单来说就是没搞全）</li>
<li><code>&#x27;use strict&#x27;</code> 指定严格模式, 已无语。<br/>
这个应该由 <code>&lt;script use-strict&gt;</code> 设置属性或在 node 指定 <code>--use-strict</code> 来开启比较合适</li>
<li>一些内置 API 的设计
<ul class="std-list">
<li>Date getMonths 从 0 开始，但其他几个 getDate 之类是从 1 开始 (虽然是 Java 的锅但多少沾点)</li>
<li>语言提供了浅拷贝的 Object.assign 但没提供深拷贝的相关方法</li>
</ul>
</li>
<li>基类构造器行为不一致
<ul class="std-list">
<li><code>new Number(&#x27;1&#x27;)</code> 和 <code>Number(&#x27;1&#x27;)</code> 两者结果不一致 有微妙的不同</li>
<li><code>new Array(&#x27;1&#x27;)</code> 和 <code>Array(&#x27;1&#x27;)</code> 两者结果一致</li>
<li><code>new Date()</code> 和 <code>Date()</code> 不一样</li>
</ul>
</li>
</ul>
<h1 id="js-没有静态类型" class="std-title --fontTitle"><a target="_blank" href="#js-没有静态类型" class="markdownIt-Anchor">#</a> js 没有静态类型<i data-minimap="Ignore"> ↵ </i></h1>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">没有静态类型的语言约等于汇编，纯 js 是浏览器的汇编，报错只会发生在运行时，下面列几个因为没有静态类型而鸡肋的 js 特性</div>
<ul class="std-list">
<li>没有静态类型系统却搞了两种等值判断 <code>==</code> 和 <code>===</code><br/>
如果有静态类型系统的话 == 和 === 反而是一种 feature, 实现 toString 方法即可达成判断，甚至能像某些语言那样做到重载运算符</li>
<li>Set Map Array 等事实上带泛型的对象，纯 js 下你只能靠上下文人肉推断了</li>
<li>null 和 undefined，如果 js 带了静态类型在开发阶段大概率会被这两个定义恶心到，从而改成只有一个空值</li>
</ul>
<h1 id="没有编译打包" class="std-title --fontTitle"><a target="_blank" href="#没有编译打包" class="markdownIt-Anchor">#</a> 没有编译打包<i data-minimap="Ignore"> ↵ </i></h1>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">这导致了 webpack / rollup 等打包工具的爆火，但是，当你想在浏览器上跑原生 esm 的时候就犯难了，太多东西是这些构建工具帮你铺平了，语言自身没有提供任何工具方法帮你 all-in-one 一份 js 文件。</div>
<h1 id="typescript-缺少静态绑定" class="std-title --fontTitle"><a target="_blank" href="#typescript-缺少静态绑定" class="markdownIt-Anchor">#</a> TypeScript 缺少静态绑定<i data-minimap="Ignore"> ↵ </i></h1>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">TypeScript 作为 js 的超集，本身是可以做很多 js 做不到的事，比如 struct 定义接口：</div>
<div class="std-code"><pre class="prismjs tsx rally-runner  "><span style="user-select:none" class="line-numbers-rows">00</span><span class="token comment">// 定义声明了一种静态结构</span>
<span style="user-select:none" class="line-numbers-rows">01</span>struct User <span class="token punctuation">{</span>
<span style="user-select:none" class="line-numbers-rows">02</span>  name<span class="token operator">:</span> string<span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">03</span>  age<span class="token operator">:</span> number<span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">04</span>  <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token function-variable function">fn</span><span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> number<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> number<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
<span style="user-select:none" class="line-numbers-rows">05</span>    <span class="token comment">// 这里 this 是静态绑定的</span>
<span style="user-select:none" class="line-numbers-rows">06</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">07</span>  <span class="token punctuation">}</span>
<span style="user-select:none" class="line-numbers-rows">08</span><span class="token punctuation">}</span>
<span style="user-select:none" class="line-numbers-rows">09</span>
<span style="user-select:none" class="line-numbers-rows">10</span><span class="token comment">// 即便是在结构后也能调用到 setAge （类型静态绑定）</span>
<span style="user-select:none" class="line-numbers-rows">11</span><span class="token keyword">const</span> eczn<span class="token operator">:</span> User <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&#x27;eczn&#x27;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">17</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">12</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>eczn <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">13</span>
<span style="user-select:none" class="line-numbers-rows">14</span><span class="token keyword">import</span> useSWR<span class="token punctuation">,</span> <span class="token punctuation">{</span> mutate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;swr&#x27;</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">15</span><span class="token keyword">function</span> <span class="token function">UserCard</span><span class="token punctuation">(</span>props<span class="token operator">:</span> <span class="token punctuation">{</span> user<span class="token operator">:</span> User <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span style="user-select:none" class="line-numbers-rows">16</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>
<span style="user-select:none" class="line-numbers-rows">17</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
<span style="user-select:none" class="line-numbers-rows">18</span>      <span class="token function">mutate</span><span class="token punctuation">(</span>
<span style="user-select:none" class="line-numbers-rows">19</span>        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/api/user/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>props<span class="token punctuation">.</span>user<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
<span style="user-select:none" class="line-numbers-rows">20</span>        props<span class="token punctuation">.</span>user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span style="user-select:none" class="line-numbers-rows">21</span>      <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">22</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
<span style="user-select:none" class="line-numbers-rows">23</span>      Current Age: </span><span class="token punctuation">{</span> props<span class="token punctuation">.</span>user<span class="token punctuation">.</span>age <span class="token punctuation">}</span><span class="token plain-text">
<span style="user-select:none" class="line-numbers-rows">24</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span style="user-select:none" class="line-numbers-rows">25</span>  <span class="token punctuation">)</span>
<span style="user-select:none" class="line-numbers-rows">26</span><span class="token punctuation">}</span></pre></div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">这种方式可以解决层层透传 props 的过程中 props 本身自带的方法的问题。</div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">上述代码，一个可行的解释是:</div>
<div class="std-code"><pre class="prismjs tsx rally-runner  "><span style="user-select:none" class="line-numbers-rows">00</span><span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
<span style="user-select:none" class="line-numbers-rows">01</span>  name<span class="token operator">:</span> string<span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">02</span>  age<span class="token operator">:</span> number<span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">03</span><span class="token punctuation">}</span>
<span style="user-select:none" class="line-numbers-rows">04</span><span class="token keyword">function</span> <span class="token function">User$setAge</span><span class="token punctuation">(</span>obj<span class="token operator">:</span> User<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span style="user-select:none" class="line-numbers-rows">05</span>  obj<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">06</span><span class="token punctuation">}</span>
<span style="user-select:none" class="line-numbers-rows">07</span><span class="token keyword">const</span> eczn<span class="token operator">:</span> User <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&#x27;eczn&#x27;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">17</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">08</span><span class="token function">User$setAge</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>eczn <span class="token punctuation">}</span><span class="token punctuation">,</span> x <span class="token operator">=&gt;</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">09</span>
<span style="user-select:none" class="line-numbers-rows">10</span><span class="token keyword">import</span> useSWR<span class="token punctuation">,</span> <span class="token punctuation">{</span> mutate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;swr&#x27;</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">11</span><span class="token keyword">function</span> <span class="token function">UserCard</span><span class="token punctuation">(</span>props<span class="token operator">:</span> <span class="token punctuation">{</span> user<span class="token operator">:</span> User <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span style="user-select:none" class="line-numbers-rows">12</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>
<span style="user-select:none" class="line-numbers-rows">13</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
<span style="user-select:none" class="line-numbers-rows">14</span>      <span class="token function">mutate</span><span class="token punctuation">(</span>
<span style="user-select:none" class="line-numbers-rows">15</span>        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/api/user/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>props<span class="token punctuation">.</span>user<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
<span style="user-select:none" class="line-numbers-rows">16</span>        <span class="token function">User$setAge</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>user<span class="token punctuation">,</span> x <span class="token operator">=&gt;</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span style="user-select:none" class="line-numbers-rows">17</span>      <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span style="user-select:none" class="line-numbers-rows">18</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
<span style="user-select:none" class="line-numbers-rows">19</span>      Current Age: </span><span class="token punctuation">{</span> props<span class="token punctuation">.</span>user<span class="token punctuation">.</span>age <span class="token punctuation">}</span><span class="token plain-text">
<span style="user-select:none" class="line-numbers-rows">20</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span style="user-select:none" class="line-numbers-rows">21</span>  <span class="token punctuation">)</span>
<span style="user-select:none" class="line-numbers-rows">22</span><span class="token punctuation">}</span></pre></div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">当然，这一切的最大前提是得有一个强大的静态类型系统。</div>
<div class="std-para --fontArticle" data-minimap-color="#CCCCCC">ts 目前并不想带超过标准定义的东西，更不想带 runtime，所以暂时没有计划支持这类特性，其他语言的优秀实践跟 js/ts 无缘了</div>
</div></article></div><hr class="std-hr"/><hr class="std-hr"/><div class="blog-footer-main"><a class="r-link _prev" href="/cate/all/"><span class="_icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="caret-left" class="svg-inline--fa fa-caret-left fa-w-6 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 512"><path fill="currentColor" d="M192 127.338v257.324c0 17.818-21.543 26.741-34.142 14.142L29.196 270.142c-7.81-7.81-7.81-20.474 0-28.284l128.662-128.662c12.599-12.6 34.142-3.676 34.142 14.142z"></path></svg></span><span>回到列表</span></a><div class="_current"><span class="_smaller _grey">第</span><span class="_nums _grey">1</span><span class="_smaller _grey">篇</span><div class="_now-id">对 JavaScript / TypeScript 的批评</div></div><a class="r-link _next" href="/cate/编程语言/why-typescript-begin-to-be-popular/"><span>TypeScript 为何流行</span><span class="_icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="caret-right" class="svg-inline--fa fa-caret-right fa-w-6 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 512"><path fill="currentColor" d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"></path></svg></span></a></div><hr class="std-hr"/><hr class="std-hr"/><div class="back-to-top-main"><span class="_icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="caret-up" class="svg-inline--fa fa-caret-up fa-w-10 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M288.662 352H31.338c-17.818 0-26.741-21.543-14.142-34.142l128.662-128.662c7.81-7.81 20.474-7.81 28.284 0l128.662 128.662c12.6 12.599 3.676 34.142-14.142 34.142z"></path></svg></span><span class="_icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="caret-up" class="svg-inline--fa fa-caret-up fa-w-10 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M288.662 352H31.338c-17.818 0-26.741-21.543-14.142-34.142l128.662-128.662c7.81-7.81 20.474-7.81 28.284 0l128.662 128.662c12.6 12.599 3.676 34.142-14.142 34.142z"></path></svg></span><span class="_icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="caret-up" class="svg-inline--fa fa-caret-up fa-w-10 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M288.662 352H31.338c-17.818 0-26.741-21.543-14.142-34.142l128.662-128.662c7.81-7.81 20.474-7.81 28.284 0l128.662 128.662c12.6 12.599 3.676 34.142-14.142 34.142z"></path></svg></span><div class="_text-intro">回到顶部</div></div><hr class="std-hr"/><hr class="std-hr"/></div></div></div>
<script>window.__INITIAL_STATE__ = {"CategoryApiState":{"loaded":true,"loading":false,"error":null,"dataMap":{"/编程语言/criticism-for-js-ts":{"type":"detail","categoryId":"编程语言","list":[{"id":"criticism-for-js-ts","title":"对 JavaScript / TypeScript 的批评","date":"2021-07-25 04:57:00","category":"编程语言","tags":[],"type":"article","appTitle":"","appIcon":"","intro":"未定义 intro","cateIntro":"该分类暂无介绍 ~","author":"eczn","imgs":[],"time":"2021-07-24T20:57:00.000Z","isDraft":false,"fileDeps":[],"wordCount":3207},{"id":"why-typescript-begin-to-be-popular","title":"TypeScript 为何流行","date":"2021-08-1 03:00:00","category":"编程语言","tags":[],"type":"article","appTitle":"","appIcon":"","intro":"未定义 intro","cateIntro":"该分类暂无介绍 ~","author":"eczn","imgs":[],"time":"2021-07-31T19:00:00.000Z","isDraft":false,"fileDeps":[],"wordCount":1522},{"id":"should-we-use-array-includes-for-condition-connection","title":"可否用数组 includes 来取代条件集联判断","date":"2021-11-21 01:02:20","category":"编程语言","tags":[],"type":"article","appTitle":"","appIcon":"","intro":"未定义 intro","cateIntro":"该分类暂无介绍 ~","author":"eczn","imgs":[],"time":"2021-11-20T17:02:20.000Z","isDraft":false,"fileDeps":[],"wordCount":4033}],"current":{"type":"markdown","meta":{"id":"criticism-for-js-ts","title":"对 JavaScript / TypeScript 的批评","date":"2021-07-25 04:57:00","category":"编程语言","tags":[],"type":"article","appTitle":"","appIcon":"","intro":"未定义 intro","cateIntro":"该分类暂无介绍 ~","author":"eczn","imgs":[],"time":"2021-07-24T20:57:00.000Z","isDraft":false,"fileDeps":[],"wordCount":3207},"nodes":[{"type":"tag","children":[{"type":"text","data":"写几年 js/ts 了，在这里喷一下。"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"#"}],"name":"a","attribs":{"href":"#各方面的一致性","className":"markdownIt-Anchor"}},{"type":"text","data":" 各方面的一致性"}],"name":"h1","attribs":{"id":"各方面的一致性"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"我们先从如何构造字符串开始谈谈，在 JavaScript 里通常用单引号或者双引号来表示字符串，也可以用模版字符串来表达字符串，比如："}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"00"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"const"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" str1"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"string"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'hello, world 1'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"01"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"const"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" str2"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"string"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"\"hello, world 2\""}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"02"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"const"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" str3"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"string"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"text","data":"hello, world 3"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"03"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"console"}],"name":"span","attribs":{"className":"token builtin"}},{"type":"tag","children":[{"type":"text","data":"."}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"log"}],"name":"span","attribs":{"className":"token function"}},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"str1"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" str2"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" str3"},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}}],"name":"pre","attribs":{"className":"prismjs ts rally-runner  "}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"该用哪种方式做字符串构造呢？这显然是一个主观问题，有的人认为单引号好，也有人觉得双引号好，更有人觉得模版字符串是最好的 …"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"然而，如果严格遵守语言设计所谓的一致性原则，只会剩下一种构造法了，比如说只留下单引号，它能支持模版字符串的所有特性:"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"00"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"const"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" a "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"123"}],"name":"span","attribs":{"className":"token number"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"01"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 另外一个平行世界里的 js 支持单引号模版"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"02"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"const"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" str "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'the a is ${a}'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}}],"name":"pre","attribs":{"className":"prismjs js rally-runner  "}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"然后便不会有人纠结用哪种构造方法了，eslint 也不必开发出三种构造方式 … 这里锅主要是为了兼容历史代码，不是 tc39 的问题，因为社区在模版字符串之前就有类似的 logger 组件了"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"00"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"logger"},{"type":"tag","children":[{"type":"text","data":"."}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"info"}],"name":"span","attribs":{"className":"token function"}},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"'asd ${aa}'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"{"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" aa"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"123"}],"name":"span","attribs":{"className":"token number"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}}],"name":"pre","attribs":{"className":"prismjs ts rally-runner  "}},{"type":"text","data":"\n"},{"type":"tag","children":[],"name":"hr","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"JS 一致性差还可以在诸多设计细节中窥见"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"分号可写可不写 … 导致引擎实现方不得不实现了 ASI 自动分号插入 (eslint / babel 开发者也一样得去实现) 这些都造成了无谓的浪费 —— 一开始设计就强制分号或者没有分号不就好了?"}],"name":"li","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"语言有两个空值 "},{"type":"tag","children":[{"type":"text","data":"undefined"}],"name":"code","attribs":{}},{"type":"text","data":" 和 "},{"type":"tag","children":[{"type":"text","data":"null"}],"name":"code","attribs":{}},{"type":"text","data":" 两者又有各种微妙的不同"}],"name":"li","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"typeof"}],"name":"code","attribs":{}},{"type":"text","data":" 的问题，比如 "},{"type":"tag","children":[{"type":"text","data":"typeof null"}],"name":"code","attribs":{}},{"type":"text","data":" 和 "},{"type":"tag","children":[{"type":"text","data":"typeof []"}],"name":"code","attribs":{}}],"name":"li","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"模块标准不一致 —— 社区里存在事实上的 require 模块标准 和 ES Module"}],"name":"li","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"toString, valueOf 这些方法没有像 Symbol.iterator 那样的 symbol 常量 （简单来说就是没搞全）"}],"name":"li","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"'use strict'"}],"name":"code","attribs":{}},{"type":"text","data":" 指定严格模式, 已无语。"},{"type":"tag","children":[],"name":"br","attribs":{}},{"type":"text","data":"\n这个应该由 "},{"type":"tag","children":[{"type":"text","data":"&lt;script use-strict&gt;"}],"name":"code","attribs":{}},{"type":"text","data":" 设置属性或在 node 指定 "},{"type":"tag","children":[{"type":"text","data":"--use-strict"}],"name":"code","attribs":{}},{"type":"text","data":" 来开启比较合适"}],"name":"li","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"一些内置 API 的设计\n"},{"type":"tag","children":[{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"Date getMonths 从 0 开始，但其他几个 getDate 之类是从 1 开始 (虽然是 Java 的锅但多少沾点)"}],"name":"li","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"语言提供了浅拷贝的 Object.assign 但没提供深拷贝的相关方法"}],"name":"li","attribs":{}},{"type":"text","data":"\n"}],"name":"ul","attribs":{}},{"type":"text","data":"\n"}],"name":"li","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"基类构造器行为不一致\n"},{"type":"tag","children":[{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"new Number('1')"}],"name":"code","attribs":{}},{"type":"text","data":" 和 "},{"type":"tag","children":[{"type":"text","data":"Number('1')"}],"name":"code","attribs":{}},{"type":"text","data":" 两者结果不一致 有微妙的不同"}],"name":"li","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"new Array('1')"}],"name":"code","attribs":{}},{"type":"text","data":" 和 "},{"type":"tag","children":[{"type":"text","data":"Array('1')"}],"name":"code","attribs":{}},{"type":"text","data":" 两者结果一致"}],"name":"li","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"new Date()"}],"name":"code","attribs":{}},{"type":"text","data":" 和 "},{"type":"tag","children":[{"type":"text","data":"Date()"}],"name":"code","attribs":{}},{"type":"text","data":" 不一样"}],"name":"li","attribs":{}},{"type":"text","data":"\n"}],"name":"ul","attribs":{}},{"type":"text","data":"\n"}],"name":"li","attribs":{}},{"type":"text","data":"\n"}],"name":"ul","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"#"}],"name":"a","attribs":{"href":"#js-没有静态类型","className":"markdownIt-Anchor"}},{"type":"text","data":" js 没有静态类型"}],"name":"h1","attribs":{"id":"js-没有静态类型"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"没有静态类型的语言约等于汇编，纯 js 是浏览器的汇编，报错只会发生在运行时，下面列几个因为没有静态类型而鸡肋的 js 特性"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"没有静态类型系统却搞了两种等值判断 "},{"type":"tag","children":[{"type":"text","data":"=="}],"name":"code","attribs":{}},{"type":"text","data":" 和 "},{"type":"tag","children":[{"type":"text","data":"==="}],"name":"code","attribs":{}},{"type":"tag","children":[],"name":"br","attribs":{}},{"type":"text","data":"\n如果有静态类型系统的话 == 和 === 反而是一种 feature, 实现 toString 方法即可达成判断，甚至能像某些语言那样做到重载运算符"}],"name":"li","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"Set Map Array 等事实上带泛型的对象，纯 js 下你只能靠上下文人肉推断了"}],"name":"li","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"null 和 undefined，如果 js 带了静态类型在开发阶段大概率会被这两个定义恶心到，从而改成只有一个空值"}],"name":"li","attribs":{}},{"type":"text","data":"\n"}],"name":"ul","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"#"}],"name":"a","attribs":{"href":"#没有编译打包","className":"markdownIt-Anchor"}},{"type":"text","data":" 没有编译打包"}],"name":"h1","attribs":{"id":"没有编译打包"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"这导致了 webpack / rollup 等打包工具的爆火，但是，当你想在浏览器上跑原生 esm 的时候就犯难了，太多东西是这些构建工具帮你铺平了，语言自身没有提供任何工具方法帮你 all-in-one 一份 js 文件。"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"#"}],"name":"a","attribs":{"href":"#typescript-缺少静态绑定","className":"markdownIt-Anchor"}},{"type":"text","data":" TypeScript 缺少静态绑定"}],"name":"h1","attribs":{"id":"typescript-缺少静态绑定"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"TypeScript 作为 js 的超集，本身是可以做很多 js 做不到的事，比如 struct 定义接口："}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"00"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 定义声明了一种静态结构"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"01"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"struct User "},{"type":"tag","children":[{"type":"text","data":"{"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"02"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"  name"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" string"},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"03"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"  age"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" number"},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"04"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":"setAge"}],"name":"span","attribs":{"className":"token function"}},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"fn"}],"name":"span","attribs":{"className":"token function-variable function"}},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"x"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" number"},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"=>"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" number"},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"void"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"{"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"05"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"// 这里 this 是静态绑定的"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"06"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"this"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"tag","children":[{"type":"text","data":"."}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"age "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"fn"}],"name":"span","attribs":{"className":"token function"}},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"this"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"tag","children":[{"type":"text","data":"."}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"age"},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"07"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"08"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"09"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"10"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"// 即便是在结构后也能调用到 setAge （类型静态绑定）"}],"name":"span","attribs":{"className":"token comment"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"11"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"const"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" eczn"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" User "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"{"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" name"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'eczn'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" age"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"17"}],"name":"span","attribs":{"className":"token number"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"12"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"{"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"..."}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"eczn "},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"."}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"setAge"}],"name":"span","attribs":{"className":"token function"}},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"x "},{"type":"tag","children":[{"type":"text","data":"=>"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" x "},{"type":"tag","children":[{"type":"text","data":"+"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"1"}],"name":"span","attribs":{"className":"token number"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"13"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"14"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"import"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" useSWR"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"{"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" mutate "},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"from"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'swr'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"15"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"function"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"UserCard"}],"name":"span","attribs":{"className":"token function"}},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"props"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"{"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" user"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" User "},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"{"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"16"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":"return"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"17"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"div"}],"name":"span","attribs":{"className":"token tag"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"onClick"}],"name":"span","attribs":{"className":"token attr-name"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token script-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"{"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"=>"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"{"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"18"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"      "},{"type":"tag","children":[{"type":"text","data":"mutate"}],"name":"span","attribs":{"className":"token function"}},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"19"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"        "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"text","data":"/api/user/"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"text","data":"props"},{"type":"tag","children":[{"type":"text","data":"."}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"user"},{"type":"tag","children":[{"type":"text","data":"."}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"name"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"20"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"        props"},{"type":"tag","children":[{"type":"text","data":"."}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"user"},{"type":"tag","children":[{"type":"text","data":"."}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"setAge"}],"name":"span","attribs":{"className":"token function"}},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"x "},{"type":"tag","children":[{"type":"text","data":"=>"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" x "},{"type":"tag","children":[{"type":"text","data":"+"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"1"}],"name":"span","attribs":{"className":"token number"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"21"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"      "},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"22"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token punctuation"}}],"name":"span","attribs":{"className":"token script language-javascript"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token punctuation"}}],"name":"span","attribs":{"className":"token tag"}},{"type":"tag","children":[{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"23"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"      Current Age: "}],"name":"span","attribs":{"className":"token plain-text"}},{"type":"tag","children":[{"type":"text","data":"{"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" props"},{"type":"tag","children":[{"type":"text","data":"."}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"user"},{"type":"tag","children":[{"type":"text","data":"."}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"age "},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"24"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "}],"name":"span","attribs":{"className":"token plain-text"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"&lt;/"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"div"}],"name":"span","attribs":{"className":"token tag"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token punctuation"}}],"name":"span","attribs":{"className":"token tag"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"25"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"26"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token punctuation"}}],"name":"pre","attribs":{"className":"prismjs tsx rally-runner  "}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"这种方式可以解决层层透传 props 的过程中 props 本身自带的方法的问题。"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"上述代码，一个可行的解释是:"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"00"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"interface"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"User"}],"name":"span","attribs":{"className":"token class-name"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"{"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"01"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"  name"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" string"},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"02"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"  age"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" number"},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"03"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"04"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"function"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"User$setAge"}],"name":"span","attribs":{"className":"token function"}},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"obj"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" User"},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"{"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"05"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"  obj"},{"type":"tag","children":[{"type":"text","data":"."}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"age "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"fn"}],"name":"span","attribs":{"className":"token function"}},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"obj"},{"type":"tag","children":[{"type":"text","data":"."}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"age"},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"06"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"07"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"const"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" eczn"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" User "},{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"{"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" name"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'eczn'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" age"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"17"}],"name":"span","attribs":{"className":"token number"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"08"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"User$setAge"}],"name":"span","attribs":{"className":"token function"}},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"{"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"..."}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":"eczn "},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" x "},{"type":"tag","children":[{"type":"text","data":"=>"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" x "},{"type":"tag","children":[{"type":"text","data":"+"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"1"}],"name":"span","attribs":{"className":"token number"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"09"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"10"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"import"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" useSWR"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"{"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" mutate "},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"from"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"'swr'"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"11"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"function"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"UserCard"}],"name":"span","attribs":{"className":"token function"}},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"props"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"{"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" user"},{"type":"tag","children":[{"type":"text","data":":"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" User "},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"{"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"12"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":"return"}],"name":"span","attribs":{"className":"token keyword"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"13"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"&lt;"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"div"}],"name":"span","attribs":{"className":"token tag"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"onClick"}],"name":"span","attribs":{"className":"token attr-name"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"="}],"name":"span","attribs":{"className":"token script-punctuation punctuation"}},{"type":"tag","children":[{"type":"text","data":"{"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"=>"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"{"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"14"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"      "},{"type":"tag","children":[{"type":"text","data":"mutate"}],"name":"span","attribs":{"className":"token function"}},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"15"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"        "},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}},{"type":"tag","children":[{"type":"text","data":"/api/user/"}],"name":"span","attribs":{"className":"token string"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"${"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}},{"type":"text","data":"props"},{"type":"tag","children":[{"type":"text","data":"."}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"user"},{"type":"tag","children":[{"type":"text","data":"."}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"name"},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token interpolation-punctuation punctuation"}}],"name":"span","attribs":{"className":"token interpolation"}},{"type":"tag","children":[{"type":"text","data":"`"}],"name":"span","attribs":{"className":"token template-punctuation string"}}],"name":"span","attribs":{"className":"token template-string"}},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"16"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"        "},{"type":"tag","children":[{"type":"text","data":"User$setAge"}],"name":"span","attribs":{"className":"token function"}},{"type":"tag","children":[{"type":"text","data":"("}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"props"},{"type":"tag","children":[{"type":"text","data":"."}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"user"},{"type":"tag","children":[{"type":"text","data":","}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" x "},{"type":"tag","children":[{"type":"text","data":"=>"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" x "},{"type":"tag","children":[{"type":"text","data":"+"}],"name":"span","attribs":{"className":"token operator"}},{"type":"text","data":" "},{"type":"tag","children":[{"type":"text","data":"1"}],"name":"span","attribs":{"className":"token number"}},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"17"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"      "},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":";"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"18"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token punctuation"}}],"name":"span","attribs":{"className":"token script language-javascript"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token punctuation"}}],"name":"span","attribs":{"className":"token tag"}},{"type":"tag","children":[{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"19"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"      Current Age: "}],"name":"span","attribs":{"className":"token plain-text"}},{"type":"tag","children":[{"type":"text","data":"{"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":" props"},{"type":"tag","children":[{"type":"text","data":"."}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"user"},{"type":"tag","children":[{"type":"text","data":"."}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"age "},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"tag","children":[{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"20"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"    "}],"name":"span","attribs":{"className":"token plain-text"}},{"type":"tag","children":[{"type":"tag","children":[{"type":"tag","children":[{"type":"text","data":"&lt;/"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"div"}],"name":"span","attribs":{"className":"token tag"}},{"type":"tag","children":[{"type":"text","data":">"}],"name":"span","attribs":{"className":"token punctuation"}}],"name":"span","attribs":{"className":"token tag"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"21"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"text","data":"  "},{"type":"tag","children":[{"type":"text","data":")"}],"name":"span","attribs":{"className":"token punctuation"}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"22"}],"name":"span","attribs":{"style":{"userSelect":"none"},"className":"line-numbers-rows"}},{"type":"tag","children":[{"type":"text","data":"}"}],"name":"span","attribs":{"className":"token punctuation"}}],"name":"pre","attribs":{"className":"prismjs tsx rally-runner  "}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"当然，这一切的最大前提是得有一个强大的静态类型系统。"}],"name":"p","attribs":{}},{"type":"text","data":"\n"},{"type":"tag","children":[{"type":"text","data":"ts 目前并不想带超过标准定义的东西，更不想带 runtime，所以暂时没有计划支持这类特性，其他语言的优秀实践跟 js/ts 无缘了"}],"name":"p","attribs":{}},{"type":"text","data":"\n"}],"rawContent":""}}}},"BlogApiState":{"loaded":false,"loading":false,"error":null,"dataMap":{}},"HomeApi":{"loaded":false,"loading":false,"error":null,"dataMap":{}},"TimeLineApiState":{"loaded":false,"loading":false,"error":null,"dataMap":{}},"SettingApi":{"loaded":false,"loading":false,"error":null,"dataMap":{}},"LaunchpadApi":{"loaded":false,"loading":false,"error":null,"dataMap":{}}}</script>
<!--SCRIPT-->
</body>
</html>
